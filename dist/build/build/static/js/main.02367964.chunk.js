(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{191:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var o,a=n(0),r=n.n(a),c=n(34),i=n.n(c),l=n(18),s=n(17),u=n(69),d=n(149),b={main:{},counts:{data:[],updated:null,countsServerTotal:null,pageLength:10},ui:{flash:[{title:"Default Flash",description:"Here is a flash that will last 20 seconds",createdAt:Date.now(),duration:5e3,catt:"info",id:Date.now()+"_528491"}],coloursets:[{liveRed:"#db0032",red:"#ca6d6d",orange:"#ff883a",yellow:"#bed800",green:"#598d00",blue:"#365075",purple:"#6e70a8",black:"#333333",white:"#f3f3f3",brown:"#9f9b15",teal:"#3db8b5",tealGreen:"#03ae99",gold:"#f8b018"}],colours:{liveRed:"#db0032",red:"#ca6d6d",orange:"#ff883a",yellow:"#bed800",green:"#598d00",blue:"#365075",purple:"#6e70a8",black:"#333333",white:"#f3f3f3",brown:"#9f9b15",teal:"#3db8b5",tealGreen:"#03ae99",gold:"#f8b018"}},auth:{userList:[],userListUpdated:null,partnerList:[],partnerListUpdated:null},repositories:{repositoryList:[],repositoryListUpdated:null,repositoryServerTotal:null}},p=n(50),g=n(7);!function(e){e.COUNTS_DATA_WRITE_ALL="COUNTS_DATA_WRITE_ALL",e.COUNTS_DATA_WRITE_MULTIPLE="COUNTS_DATA_WRITE_MULTIPLE",e.COUNTS_DATA_UPDATE_SINGLE="COUNTS_DATA_UPDATE_SINGLE",e.COUNTS_DATA_WRITE_SINGLE="COUNTS_DATA_WRITE_SINGLE",e.COUNTS_SERVER_TOTAL_WRITE="COUNTS_SERVER_TOTAL_WRITE",e.UI_FLASH_WRITE_ONE="UI_FLASH_WRITE_ONE",e.UI_FLASH_REMOVE_ONE="UI_FLASH_REMOVE_ONE",e.AUTH_USERS_WRITE_ALL="AUTH_USERS_WRITE_ALL",e.AUTH_PARTNER_WRITE_ALL="AUTH_PARTNER_WRITE_ALL",e.REPOSITORIES_WRITE_ALL="REPOSITORIES_WRITE_ALL"}(o||(o={}));var j=o;function f(e,t){return Object(g.a)(Object(g.a)({},e),{},{updated:Date.now(),data:t.payload})}function O(e,t){return Object(g.a)(Object(g.a)({},e),{},{updated:Date.now(),data:[].concat(Object(p.a)(e.data),Object(p.a)(t.payload))})}function h(e,t){return Object(g.a)(Object(g.a)({},e),{},{countsServerTotal:t.payload})}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.main,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.COUNTS_DATA_WRITE_ALL:return f(e,t);case j.COUNTS_DATA_WRITE_MULTIPLE:return O(e,t);case j.COUNTS_SERVER_TOTAL_WRITE:return h(e,t);default:return e}};function x(e,t){return Object(g.a)(Object(g.a)({},e),{},{flash:[Object(g.a)(Object(g.a)({},t.payload),{},{createdAt:Date.now(),id:Date.now()+function(){for(var e="",t=0;t<6;t++)e+=Math.floor(10*Math.random());return e}()})].concat(Object(p.a)(e.flash))})}function v(e,t){var n=e.flash.filter((function(e){return e.id!==t.payload}));return Object(g.a)(Object(g.a)({},e),{},{flash:n})}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.ui,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.UI_FLASH_WRITE_ONE:return x(e,t);case j.UI_FLASH_REMOVE_ONE:return v(e,t);default:return e}};function y(e,t){return Object(g.a)(Object(g.a)({},e),{},{userList:t.payload,userListUpdated:Date.now()})}function E(e,t){return Object(g.a)(Object(g.a)({},e),{},{partnerList:t.payload,partnerListUpdate:Date.now()})}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.auth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.AUTH_USERS_WRITE_ALL:return y(e,t);case j.AUTH_PARTNER_WRITE_ALL:return E(e,t);default:return e}};function P(e,t){return Object(g.a)(Object(g.a)({},e),{},{repositoryList:t.payload,repositoryListUpdated:Date.now()})}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.repositories,t=arguments.length>1?arguments[1]:void 0;return t.type===j.REPOSITORIES_WRITE_ALL?P(e,t):e},T=Object(u.b)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.main;return e},counts:m,ui:_,auth:S,repositories:C}),A=T,w=[d.a],D=[u.a.apply(void 0,w)];window.hasOwnProperty("__REDUX_DEVTOOLS_EXTENSION__")&&D.push(window.__REDUX_DEVTOOLS_EXTENSION__());var I,R=u.c.apply(void 0,D),F=Object(u.d)(A,b,R),N={primary:"#598d00",highlight:"#BED800",bgDark:"#004A32",shade:"#2F6B38",bgLight:"#FFFFFF"},L={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"},waitrose:Object(g.a)({},N),theme_light:{text:{clickable:N.bgDark,contrastGreen:"#FFFFFF",darker:"#515151",standard:"#717171",light:"#9a9a9a",lighter:"#C4C4C4",invisable:"#DADADB",menuActive:"#FFFFFF",title:N.bgDark,button:"#F3F3F3",buttonActive:N.primary},background:{primary:"#EAEAEA",secondary:"#7EC507",button:"#FFFFFF"},ui:{line:"#CACACA",container:"#CACACA",danger:"#CA6D6D",dangerLight:"#E75858",dangerDark:"#AF1C1C",divider:"#ECF0F1",bgInsetLight:"#F8F8F8",bgInsetShaded:"#E2E2E2",bgInsetDark:"#DEDEDE"},info:{unfinished:"#ca6d6d",partial:"#bed800",complete:"#004A32",unverified:"#3db8b5"}}},B={body:"lato, Lato-Regular, lato-regular, 'Lato Regular', roboto, system-ui, sans-serif",heading:"lato, Lato-Regular, roboto, system-ui, sans-serif, Georgia, serif",mono:"lato, Lato-Regular, roboto, system-ui, sans-serif, Menlo, monospace"},k={xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"},M={hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},U={normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},V={tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},G={px:"1px",0:"0",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},H=Object(g.a)(Object(g.a)({},G),{},{max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}}),W={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},z={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},J={global:{body:{color:"theme_light.text.standard",fontFamily:["lato","roboto","sans-serif"]},button:{h:"auto"}}},Y={h:"auto !important",fontWeight:"normal",lineHeight:"normal",color:"theme_light.text.contrastGreen",border:"2px solid",borderColor:"waitrose.primary",bgColor:"waitrose.primary",p:"8px 16px",margin:"0 4px",_hover:{borderColor:"#7EC507",bgColor:"#7EC507"},_active:{borderColor:"waitrose.bgDark",bgColor:"waitrose.bgDark"}},X={Heading:{baseStyle:{color:"theme_light.text.standard",padding:".35rem 0"},sizes:{"2xl":{color:"theme_light.text.title"}},variants:{primary:{color:"theme_light.text.title"}},defaultProps:{}},Button:{baseStyle:Object(g.a)({},Y),sizes:{sm:{h:"auto !important",fontSize:"12px",p:"4px 4px",padding:"4px 4px",borderRadius:".15rem"},md:{fontSize:"16px",p:"8px 16px"},lg:{fontSize:"20px",p:"12px 20px"}},variants:{standard:Y,link:{border:"none",background:"none",textDecoration:"none",cursor:"pointer",color:"waitrose.primary",_hover:{textDecoration:"none",bg:"none",color:"theme_light.text.clickable"},_active:{color:"#7EC507",bg:"none",textDecoration:"none"}},outline:{color:"waitrose.primary",border:"2px solid",borderColor:"waitrose.primary",bgColor:"rgba(0,0,0,0)",fontWeight:"normal",padding:"16px 24px",margin:"0 4px",_hover:{borderColor:"waitrose.primary",bgColor:"waitrose.primary",background:"waitrose.primary",color:"theme_light.text.contrastGreen"},_active:{borderColor:"waitrose.bgDark",bgColor:"waitrose.bgDark",background:"waitrose.bgDark",color:"#FFFFFF"}},solid:{bg:"green.500",color:"white"},ui:{border:"2px solid",marginY:"2px",borderColor:"#EAEAEA",h:"auto",bgColor:"#EAEAEA",color:"theme_light.text.standard",_hover:{borderColor:"#D3D3D3",bgColor:"#D3D3D3",color:"theme_light.text.darker"},_active:{borderColor:"#C4C4C4",bgColor:"#C4C4C4"},_focus:{boxShadow:"0 0 0 2px #5EAFFB",borderColor:"#5EAFFB"}},transparent:{bgColor:"none",borderColor:"waitrose.primary",color:"waitrose.primary",_hover:{color:"white",borderColor:"waitrose.primary",bgColor:"waitrose.primary"},_active:{color:"white",bgColor:"waitrose.bgDark",borderColor:"waitrose.bgDark"}},primary:{borderRadius:"20px"},warning:{},danger:{bgColor:"theme_light.ui.danger",borderColor:"theme_light.ui.danger",color:"#ffffff",_hover:{bgColor:"theme_light.ui.dangerLight",borderColor:"theme_light.ui.dangerLight"},_active:{bgColor:"theme_light.ui.dangerDark",borderColor:"theme_light.ui.dangerDark"}},dangerOutline:{bg:"none",border:"2px solid",borderColor:"theme_light.ui.danger",color:"theme_light.ui.danger",_hover:{bgColor:"theme_light.ui.danger",borderColor:"theme_light.ui.danger",color:"#ffffff"},_active:{bgColor:"theme_light.ui.dangerDark",borderColor:"theme_light.ui.dangerDark"}},dangerLink:{bg:"none",border:"2px solid",borderColor:"rgba(0,0,0,0)",fontWeight:"bold",color:"theme_light.ui.danger",_hover:{bg:"none",borderColor:"rgba(0,0,0,0)",color:"theme_light.ui.dangerLight"},_active:{bg:"none",borderColor:"rgba(0,0,0,0)",color:"theme_light.ui.dangerDark"}}},defaultProps:{size:"md",variant:"standard",h:"auto"}},Text:{baseStyle:{color:"theme_light.text.standard",padding:".2rem 0"},sizes:{},variants:{danger:{color:"theme_light.ui.danger"},faded:{color:"theme_light.text.invisable"}},defaultProps:{}},FormLabel:{baseStyle:{color:"theme_light.text.standard"},sizes:{},variants:{},defaultProps:{}},Input:{baseStyle:{color:"red",m:"20px"}},Textarea:{baseStyle:{bgColor:"#f8f8f8"}},Select:{baseStyle:{color:"red",borderRadius:"0",bg:"blue"},variants:{outline:{borderRadius:"0",color:"red"}}}},Z=(n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,{colors:L,fonts:B,fontSizes:k,fontWeights:M,lineHeights:U,letterSpacings:V,space:G,sizes:H,radii:W,zIndices:z,styles:J,components:X}),K=(n(191),n(90)),Q=n(16),$=n(24),q=n.n($),ee=n(45),te=function(e,t,n){return function(){var o=Object(ee.a)(q.a.mark((function o(a){var r,c,i;return q.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r="/api/v1/count?deleted=false&page=".concat(e||0,"&pagelength=").concat(t||10),n&&(r+="&repository=".concat(n)),console.log(r),o.next=5,fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}});case 5:return c=o.sent,o.next=8,c.json();case 8:i=o.sent,console.log(i),a({type:j.COUNTS_DATA_WRITE_MULTIPLE,payload:i.counts});case 11:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},ne=function(e,t,n,o){return{type:j.UI_FLASH_WRITE_ONE,payload:{title:e,description:t,catt:n,duration:o||null}}},oe=n(74),ae=n(129),re=n(22),ce=n(3),ie=function(e){var t=e.title,n=e.navWidth;return Object(ce.jsxs)(oe.c,{direction:"row",children:[Object(ce.jsxs)(ae.a,{m:"0",borderRadius:"0",width:n||"auto",transition:"background 250ms, border 250ms",children:[Object(ce.jsx)(re.c,{}),"Exit"]}),Object(ce.jsxs)(oe.c,{direction:"column",flex:"1",children:[Object(ce.jsx)(oe.f,{as:"h1",size:"xl",variant:"primary",alignSelf:"flex-start",p:"10px 40px",children:t}),Object(ce.jsx)(oe.a,{padding:"0 40px",children:Object(ce.jsx)(oe.b,{orientation:"horizontal",height:"1px",bg:"theme_light.text.darker"})})]})]})},le=function(e){var t=Object(Q.f)().pathname===e.to,n="".concat("5px",t?" solid #fff":" solid rgba(0,0,0,0)"),o=e.primary?"bold":"normal";return Object(ce.jsx)(oe.h,{m:"20px 0",p:"4px 16px",borderLeft:n,fontWeight:o,children:Object(ce.jsx)(oe.g,Object(g.a)(Object(g.a)({},e),{},{href:"#".concat(e.to),color:"waitrose.bgLight",fontSize:"1.2em"}))})},se=function(){return Object(ce.jsx)(oe.c,{direction:"column",bgColor:"waitrose.primary",h:"100%",textAlign:"left",children:Object(ce.jsx)("nav",{children:Object(ce.jsxs)(oe.j,{styleType:"none",m:"0px",children:[Object(ce.jsx)(oe.b,{}),Object(ce.jsx)(le,{to:"/repositories",primary:"true",current:"true",children:"Repositories"}),Object(ce.jsx)(oe.b,{}),Object(ce.jsx)(le,{to:"/counts",primary:"true",children:"Counts"}),Object(ce.jsx)(le,{to:"/count/new",children:"New Count"}),Object(ce.jsx)(le,{to:"/incomplete-counts",children:"Incomplete Counts"}),Object(ce.jsx)(oe.b,{}),Object(ce.jsx)(le,{to:"/users",primary:"true",children:"Users"}),Object(ce.jsx)(oe.b,{})]})})})},ue=n(14),de=function(e){var t=e.title,n=e.description,o=e.catt,r=e.duration,c=e.id,i=Object(l.b)(),s=Object(a.useState)(null),u=Object(ue.a)(s,2),d=u[0],b=u[1],p=Object(a.useState)("translate(-100%, -50%)"),g=Object(ue.a)(p,2),f=g[0],O=g[1];function h(){O("translate(-120%, 0%)"),setTimeout((function(){i(function(e){return{type:j.UI_FLASH_REMOVE_ONE,payload:e}}(c))}),1e3)}Object(a.useEffect)((function(){O("translate(0%, 0%)"),r&&b(setTimeout(h,r))}),[]);var m="18px";return Object(ce.jsxs)(oe.a,{bgColor:"waitrose.bgLight",p:"0px 0px 0px 20px",my:"5px",borderLeft:"15px solid",display:"flex",alignItems:"stretch",justifyContent:"space-between",borderColor:function(){switch(o){case"unverified":case"info":return"theme_light.info.unverified";case"complete":return"theme_light.info.complete";case"partial":return"theme_light.info.partial";case"danger":case"incomplete":return"theme_light.info.unfinished";default:return"theme_light.text.standard"}}(),boxShadow:"5px 5px 10px rgba(0,0,0,.3)",transform:f,transition:"transform .2s linear",onMouseOver:function(){b(clearTimeout(d))},w:"100%",_hover:{bgColor:"#f2f2f2"},children:[Object(ce.jsxs)(oe.c,{alignItems:"center",children:[Object(ce.jsx)(oe.f,{fontSize:"1.2em",py:m,children:t}),Object(ce.jsx)(oe.i,{fontSize:"1.1em",px:"1em",py:m,children:n})]}),Object(ce.jsx)(ae.a,{h:"1mm00%",m:"0",borderRadius:"0",bgColor:"waitrose.bgLight",color:"theme_light.text.standard",border:"none",_hover:{bgColor:"theme_light.text.invisable"},_active:{bgColor:"theme_light.text.light"},onClick:h,children:Object(ce.jsx)(re.e,{})})]})},be=function(){var e=Object(l.c)((function(e){return e.ui})).flash;return Object(ce.jsx)(oe.c,{position:"fixed",bottom:"10px",left:"10px",w:"30vw",direction:"column",children:e.map((function(e,t){return Object(ce.jsx)(de,Object(g.a)({},e),t)}))})},pe=function(e){var t=e.children,n=e.title,o="15vw";return Object(ce.jsxs)(oe.d,{className:"Page-Dashboard",templateColumns:"".concat(o," 1fr"),templateRows:"auto 1fr",h:"100vh",bgColor:"theme_light.background.primary",children:[Object(ce.jsx)(oe.e,{colStart:1,colEnd:-1,children:Object(ce.jsx)(ie,{title:n,navWidth:o})}),Object(ce.jsx)(oe.e,{rowStart:2,rowEnd:-1,children:Object(ce.jsx)(se,{})}),Object(ce.jsx)(oe.e,{w:"100%",p:"2em 40px",textAlign:"left",bg:"theme_light.background.primary",colStart:2,colEnd:2,rowStart:2,rowEnd:2,bgColor:"theme_light.background.primary",children:t}),Object(ce.jsx)(be,{})]})},ge=function(){return Object(ce.jsx)(ce.Fragment,{children:"Login Page"})},je=n(12),fe=n(13),Oe={bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]},he=["bagNote5","bagPound2","bagPound1","bagPence50","bagPence20","bagPence10","bagPence5","bagPence2","bagPence1"],me=function(e){var t=e.width,n=e.height,o=e.repository,r=Object(a.useState)([]),c=Object(ue.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)(Oe),d=Object(ue.a)(u,2),b=d[0],j=d[1],f=Object(a.useState)(null),O=Object(ue.a)(f,2),h=O[0],m=O[1],x=Object(a.useState)(Array.from({length:10},(function(e,t){return t}))),v=Object(ue.a)(x,2),_=v[0],y=v[1],E=Object(l.c)((function(e){return e.ui.colours})),S={bagNote5:E.red,bagPound2:E.green,bagPound1:E.blue,bagPence50:E.orange,bagPence20:E.yellow,bagPence10:E.teal,bagPence5:E.black,bagPence2:E.gold,bagPence1:E.liveRed};Object(a.useEffect)((function(){var e="/api/v1/count?repository=".concat(o.id,"&float=1&limit=4");fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.status?s(e.counts):console.error(e.errorMessage)})).catch((function(e){return console.error(e)}))}),[o]),Object(a.useEffect)((function(){var e=i.map((function(e){var t=Object(g.a)({},e.float),n=he.map((function(t){return{label:t,value:e.float&&e.float[t]?e.float[t]:0}})).sort((function(e,t){return e.value-t.value})),o=[];return n.forEach((function(e){0===o.length||e.value===o[0].value?o.push(e):function(e){for(var n=o.length,a=Math.ceil(n/2),r=1-a,c=0;r<=n-a;r++,c++){var i=o[c].label,l=o[c].value,s=r;t[i]=l+s}o.length=0,o.push(e)}(e)})),Object(g.a)(Object(g.a)({},e),{},{float:t})})),t=function(e,t,n,o,a){return{label:e,y:t,x:n,timestamp:o,id:a}},n=e.reduce((function(e,n,o){var a,r,c,i,l,s,u,d,b,p=Object(g.a)({},e);return p.bagNote5.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(a=n.float)||void 0===a?void 0:a.bagNote5)||0)/500,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPound2.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(r=n.float)||void 0===r?void 0:r.bagPound2)||0)/2e3,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPound1.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(c=n.float)||void 0===c?void 0:c.bagPound1)||0)/2e3,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence50.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(i=n.float)||void 0===i?void 0:i.bagPence50)||0)/1e3,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence20.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(l=n.float)||void 0===l?void 0:l.bagPence20)||0)/1e3,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence10.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(s=n.float)||void 0===s?void 0:s.bagPence10)||0)/500,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence5.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(u=n.float)||void 0===u?void 0:u.bagPence5)||0)/500,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence2.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(d=n.float)||void 0===d?void 0:d.bagPence2)||0)/100,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence1.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(b=n.float)||void 0===b?void 0:b.bagPence1)||0)/100,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p}),{bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]}),o=[],a=[];Object.values(n).forEach((function(e){var t=e.map((function(e){return e.y}));o.push(Math.max.apply(Math,Object(p.a)(t))),a.push(Math.min.apply(Math,Object(p.a)(t)))}));var r=Math.max.apply(Math,o)+1,c=Math.min.apply(Math,a),l=Array.from({length:r-c},(function(e,t){return t+c}));y(l),j(n)}),[i]);var P=function(e){m(e)};return i.length?Object(je.c)("div",{style:{position:"relative"}},Object(je.c)(fe.g,{width:t,height:n,background:"#183625",onMouseLeave:function(){m(null)}},Object(je.c)(fe.f,null),Object(je.c)(fe.h,{tickValues:_}),Object(je.c)(fe.c,null),he.map((function(e){return Object(je.c)(fe.d,{key:e,data:b[e],color:S[e]})})),he.map((function(e){return Object(je.c)(fe.e,{key:e,data:b[e],onNearestX:P,color:S[e]})})),null!==h&&void 0!==h?Object(je.c)(fe.a,{values:[h]},Object(je.c)("div",{css:Object(je.b)({textAlign:"left",fontSize:"12px",padding:"6px",borderRadius:"5px",pointerEvents:"none",boxShadow:"5px 5px 5px rgba(0,0,0,.3)",background:"#3A3A48",margin:"5px",boxSizing:"border-box",transform:"translateY(-100%)",display:"flex",flexDirection:"column"})},Object(je.c)("p",null,h.label))):void 0),Object(je.c)("div",null,JSON.stringify(h))):Object(je.c)("div",{style:{position:"relative"}},Object(je.c)(oe.c,{height:n,alignItems:"center",justifyContent:"center"},Object(je.c)(oe.f,{as:"h4"},"No Data")))},xe=function(){var e=Object(l.c)((function(e){return e.repositories.repositoryList})).filter((function(e){return!e.deleted&&!e.deactivated})),t=[{w:600,h:300}];return Object(ce.jsx)(oe.d,{gridTemplateColumns:"1fr 1fr",gridAutoRows:"auto",children:e.map((function(e){return Object(ce.jsx)(oe.e,{p:"40px 20px",children:Object(ce.jsxs)(oe.a,{w:"100%",bgColor:"#fff",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",children:[Object(ce.jsx)(oe.f,{as:"h2",children:e.name}),Object(ce.jsx)(me,{width:t[0].w,height:t[0].h,repository:e})]})},e.id)}))})},ve=n(144),_e=function(){return Object(ce.jsx)(oe.a,{position:"fixed",bottom:"0",right:"0",children:Object(ce.jsxs)(ae.a,{as:oe.g,href:"/#/count/new",h:50,borderRadius:25,fontSize:"18px",px:"30px",margin:"1rem 2rem",_hover:{textDecoration:"none",borderColor:"#7EC507",bgColor:"#7EC507"},children:["New Count",Object(ce.jsx)(re.a,{ml:"20px"})]})})},ye=n(141),Ee=function(e){var t,n=e.listCount,o=e.repositories,a=new Date(n.timestamp),r="40px",c=o.find((function(e){return n.repositoryId===e.id}));return Object(ce.jsxs)(oe.c,{bgColor:"#ffffff",alignItems:"center",justifyContent:"space-between",m:"4px 0",borderLeft:"10px solid",borderLeftColor:(t=n.completionStatus,{complete:"theme_light.info.complete",partial:"theme_light.info.partial",incomplete:"theme_light.info.unfinished",unverified:"theme_light.info.unverified"}[t]),transition:".1s linear",title:function(e){return{complete:"This count is a fully completed count.",partial:"This count is partially complete meaning at least the bagged coin data is present.",incomplete:"This count is missing data and will not show on any graphs or analytics.",unverified:"This count is unverified, a duty partner must authorise it."}[e]}(n.completionStatus),_hover:{bgColor:"#DADADB"},children:[Object(ce.jsx)(oe.g,{href:"#/count/".concat(n.id),flex:"1",py:"10px",pl:r,_hover:{textDecoration:"none"},children:Object(ce.jsxs)(oe.c,{alignItems:"center",justifyContent:"space-between",children:[Object(ce.jsx)(oe.i,{children:c?c.name:""}),Object(ce.jsx)(oe.i,{children:["Mon","Tue","Wed","Thur","Fri","Sat","Sun"][a.getDay()]}),Object(ce.jsx)(oe.i,{children:a.toLocaleDateString("en-GB")}),Object(ce.jsx)(oe.i,{children:a.toLocaleTimeString("en-GB")})]})}),Object(ce.jsx)(oe.c,{alignItems:"center",justifyContent:"center",px:r,children:Object(ce.jsx)(ye.a,{})})]},n.id)},Se=n(142),Pe=function(e){return Object(ce.jsx)(Se.a,Object(g.a)({color:"theme_light.text.light",borderRadius:"0",border:"2px solid",borderColor:"theme_light.text.lighter",m:"10px 0",_hover:{color:"theme_light.text.darker",borderColor:"theme_light.text.light"},_focus:{boxShadow:"0 0 0 2px #5EAFFB",borderColor:"theme_light.text.standard"}},e))},Ce=function(e){var t=e.selectedRepo,n=e.changeSeletedRepo,o=e.repositories;return Object(ce.jsxs)(Pe,{w:"50%",value:t,onChange:function(e){return n(e.target.value)},children:[Object(ce.jsx)("option",{value:"all",children:"All Repositories"}),o.map((function(e){return Object(ce.jsx)("option",{value:e.id,children:e.name},e.id)}))]})},Te=n(143),Ae=function(e){var t=e.page,n=(e.pageLength,e.setPage);return Object(ce.jsxs)(oe.c,{justifyContent:"center",m:"50px 0",position:"sticky",bottom:"10px",children:[Object(ce.jsxs)(ae.a,{variant:"ui",onClick:function(e){0!==t&&n(t-1)},children:[Object(ce.jsx)(re.c,{}),"Previous"]}),Object(ce.jsx)(Te.a,{value:t,onChange:function(e){return console.log(e)},w:"100px",textAlign:"center"}),Object(ce.jsxs)(ae.a,{variant:"ui",onClick:function(e){return n(t+1)},children:["Next",Object(ce.jsx)(re.d,{})]})]})},we=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.repositories.repositoryList})),n=Object(a.useState)("all"),o=Object(ue.a)(n,2),r=o[0],c=o[1],i=Object(a.useState)(0),s=Object(ue.a)(i,2),u=s[0],d=s[1],b=Object(l.c)((function(e){return e.counts})),p=b.data,g=b.updated,f=b.pageLength;return Object(a.useEffect)((function(){e(function(){var e=Object(ee.a)(q.a.mark((function e(t){var n,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch("/api/v1/count/total",{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:o=e.sent,t({type:j.COUNTS_SERVER_TOTAL_WRITE,payload:o.total["count(*)"]});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e,u]),Object(a.useEffect)((function(){(u+1)*f>p.length&&p.length%f===0&&e(te(u,f,r))}),[e,u]),g?Object(ce.jsxs)("div",{children:[Object(ce.jsx)(Ce,{selectedRepo:r,changeSeletedRepo:function(t){c(t),d(0),e(te(u,f))},repositories:t}),Object(ce.jsx)(oe.c,{direction:"column",children:p.filter((function(e){return e.repositoryId===Number(r)||"all"===r})).slice(u*f,(u+1)*f).map((function(e,n){return Object(ce.jsx)(Ee,{listCount:e,repositories:t},n)}))}),Object(ce.jsx)(Ae,{page:u,setPage:d,pageLength:f}),Object(ce.jsx)(_e,{})]}):Object(ce.jsxs)(oe.c,{direction:"column",children:[Object(ce.jsx)(ve.a,{height:"40px",width:"50%",my:"10px"}),Array.from({length:3}).map((function(e,t){return Object(ce.jsx)(ve.a,{height:"30px",my:"4px"},t)}))]})},De=n(47),Ie=n(23),Re=n(86),Fe=n(48),Ne=r.a.createContext({testing:"testing one two"}),Le=["401","403","lotto"];!function(e){e.WRITE_ALL="WRITE_ALL",e.SET_READY="SET_READY",e.UPDATE_REPO="UPDATE_REPO",e.UPDATE_COUTNER="UPDATE_COUTNER",e.UPDATE_SUPERVISOR="UPDATE_SUPERVISOR",e.UPDATE_TIME="UPDATE_TIME",e.UPDATE_BAG="UPDATE_BAG",e.UPDATE_LOOSE="UPDATE_LOOSE",e.UPDATE_NOTES="UPDATE_NOTES"}(I||(I={}));var Be=function(e,t){return""===e||void 0===e||null===e?"":e},ke=function(e){if(void 0===e||null===e||!e)return"";var t="",n=null===e.shortUid;return console.log(e),n?t+="".concat(e.firstName," ").concat(e.lastName):(t+="".concat(e.tillNumber," "),e.firstName&&""!==e.firstName&&(e.lastName&&""!==e.lastName?(t+=e.firstName.substring(0,1).toUpperCase(),t+=e.lastName.substring(0,1).toUpperCase()):t+=e.firstName)),t},Me=function(e){var t=e.label,n=e.step,o=e.denomination,r=Object(a.useContext)(Ne),c=r.state,i=r.dispatch,l=c.data.bagged[o],s=Object(a.useState)(null),u=Object(ue.a)(s,2),d=u[0],b=u[1],p=Object(a.useState)(null),g=Object(ue.a)(p,2),j=g[0],f=g[1],O=Object(Re.b)("(max-width: 760px)");Object(a.useEffect)((function(){f(l)}),[l]);var h,m=O?"6fr":"4fr";return Object(ce.jsx)(oe.e,{p:O?"8px 10px":"8px 20px",children:Object(ce.jsxs)(oe.d,{alignItems:"center",justifyContent:"space-around",title:d||"",width:"100%",templateColumns:"".concat("3fr"," ").concat(m," ").concat("3fr"),justifyItems:"center",children:[Object(ce.jsxs)(De.b,{margin:"0",children:[t," "]}),Object(ce.jsx)(Fe.a,{value:Be("number"===typeof j?j/n:j),children:Object(ce.jsx)(Fe.b,{value:Be("number"===typeof j?j/n:j),onKeyDown:function(e){var t=e.keyCode;if(!(t<38||t>40)){if(38===t){var a=Number(j)+n;if(a<0)return;i({type:I.UPDATE_BAG,payload:Object(Ie.a)({},o,a)})}if(40===t){var r=Number(j)-n;if(r<0)return;i({type:I.UPDATE_BAG,payload:Object(Ie.a)({},o,r)})}}},onChange:function(e){return function(e){var t=Number(e)*n,a=""===e||void 0===e||null===e?null:t;if(t%1||isNaN(t))b("Invalid input, please check");else{b(null);var r=Object(Ie.a)({},o,a);i({type:I.UPDATE_BAG,payload:r})}}(e.target.value)},bgColor:"#f8f8f8",borderColor:"rgba(0,0,0,0)",borderRadius:"none",borderBottom:"2px solid",borderBottomColor:"theme_light.text.lighter",boxShadow:d?"0 0 0 3px #E75858":"none",title:"The number of ".concat(t," bags. Each bag is \xa3").concat((n/100).toFixed(2)),className:"tab_jump bag_".concat(o)})}),Object(ce.jsx)(oe.i,{p:"0",color:"theme_light.text.invisable",children:(h="number"===typeof j?j:0,"\xa3".concat(h/100))})]})})},Ue=function(e){var t=e.value,n=e.title;return Object(ce.jsx)(oe.a,{p:"20px",children:Object(ce.jsxs)(oe.i,{fontSize:"18px",color:"theme_light.text.darker",textAlign:"right",title:n||"",children:["Total: ",(t/100).toFixed(2)]})})},Ve=function(){var e=Object(a.useContext)(Ne).state.data.bagged.total;return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(oe.b,{}),Object(ce.jsx)(De.b,{marginTop:"10px",children:"Bagged Coin"}),Object(ce.jsxs)(oe.d,{templateColumns:"1fr 1fr",autoRows:"1fr",children:[Object(ce.jsx)(Me,{label:"\xa32",denomination:"pound_two",step:2e3,display:"pound"}),Object(ce.jsx)(Me,{label:"\xa31",denomination:"pound_one",step:2e3,display:"pound"}),Object(ce.jsx)(Me,{label:"50p",denomination:"pence_fifty",step:1e3,display:"pence"}),Object(ce.jsx)(Me,{label:"20p",denomination:"pence_twenty",step:1e3,display:"pence"}),Object(ce.jsx)(Me,{label:"10p",denomination:"pence_ten",step:500,display:"pence"}),Object(ce.jsx)(Me,{label:"5p",denomination:"pence_five",step:500,display:"pence"}),Object(ce.jsx)(Me,{label:"2p",denomination:"pence_two",step:100,display:"pence"}),Object(ce.jsx)(Me,{label:"1p",denomination:"pence_one",step:100,display:"pence"}),Object(ce.jsx)(oe.a,{}),Object(ce.jsx)(Me,{label:"\xa35 Note",denomination:"note_five",step:500,display:"pound"})]}),Object(ce.jsx)(Ue,{value:e,title:"total bagged value (\xa3)"})]})},Ge=function(e){return Object(ce.jsx)(Te.a,Object(g.a)({color:"theme_light.text.light",borderRadius:"0",bgColor:"#f8f8f8",borderTop:"none",borderLeft:"none",borderRight:"none",borderBottom:"2px solid",borderColor:"theme_light.text.lighter",m:"10px 0",_hover:{borderColor:"theme_light.text.standard"},_focus:{color:"theme_light.text.darker",boxShadow:"0 0 0 2px #5EAFFB"}},e))},He=n(99),We=function(e){var t=e.formatReadableName,n=e.handleDropDownSelect,o=e.showMenu,a=e.filteredList,r=Object(l.c)((function(e){return e.auth})).userListUpdated;return Object(ce.jsx)(oe.c,{flexDirection:"column",position:"relative",zIndex:"1",children:r&&o&&0!==a.length&&Object(ce.jsx)(oe.j,{position:"absolute",m:"0px",top:"0px",background:"#fff",w:"100%",boxShadow:"0px 5px 10px rgba(0,0,0,.1)",borderRadius:"5px",py:"4px",children:a.map((function(e,o){return Object(ce.jsx)(oe.h,{listStyleType:"none",children:Object(ce.jsxs)(ae.a,{p:"4px",variant:"ui",mx:"0px",my:"0px",borderRadius:"0px",width:"100%",justifyContent:"flex-start",bgColor:0===o?"#cde6fe":"#fff",border:"none",onClick:function(){return n(e)},display:"flex",justifyItems:"space-between",children:[Object(ce.jsx)("span",{children:t(e)}),Object(ce.jsx)("span",{children:0===o?Object(ce.jsx)(He.b,{}):""})]},e.id)},e.id)}))})})},ze=function(e){var t=e.label,n=e.dispatchType,o=e.stateAssignment,r=Object(a.useContext)(Ne),c=r.state,i=r.dispatch,s=Object(l.c)((function(e){return e.auth.partnerList})),u=Object(a.useState)(!1),d=Object(ue.a)(u,2),b=d[0],p=d[1],g=Object(a.useState)(s),j=Object(ue.a)(g,2),f=j[0],O=j[1];return Object(a.useEffect)((function(){var e=s.filter((function(e){if(!/\w+/.test(c[o]))return!0;var t=[e.firstName,e.middleNames,e.lastName],n="".concat(e.id).concat(e.shortUid).concat(t.join("")),a=!1;if(new RegExp(c[o],"gi").test(n)&&(a=!0),e.firstName&&e.lastName){var r=e.firstName.substring(0,1),i=e.lastName.substring(0,1);new RegExp("".concat(r).concat(i),"gi").test(c[o])&&(a=!0)}return a}));O(e)}),[c[o]]),Object(ce.jsxs)(Te.b,{display:"flex",flexDirection:"column",onBlur:function(){setTimeout((function(){p(!1)}),500)},onFocus:function(){p(!0)},onKeyDown:function(e){var t;if(13===e.keyCode&&!(f.length<1)){var a=f[0];i({type:n,payload:(t={},Object(Ie.a)(t,o,ke(a)),Object(Ie.a)(t,"".concat(o,"Id"),a.id),t)}),p(!1)}},children:[Object(ce.jsx)(De.b,{children:t}),Object(ce.jsxs)(oe.a,{px:"1rem",position:"relative",children:[Object(ce.jsx)(Ge,{value:c[o],onChange:function(e){return i({type:n,payload:Object(Ie.a)({},o,e.target.value)})},marginBottom:"0px"}),Object(ce.jsx)(We,{formatReadableName:ke,handleDropDownSelect:function(e){var t;console.log("Clicked ",e.shortUid),i({type:n,payload:(t={},Object(Ie.a)(t,o,ke(e)),Object(Ie.a)(t,"".concat(o,"Id"),e.id),t)}),p(!1)},showMenu:b,filteredList:f})]})]})},Je=function(e){var t=e.label,n=e.denomination,o=e.step,r=Object(a.useContext)(Ne),c=r.state,i=r.dispatch,l=c.data.loose[n],s=Object(a.useState)(null),u=Object(ue.a)(s,2),d=u[0],b=u[1],p=Object(a.useState)(void 0),g=Object(ue.a)(p,2),j=g[0],f=g[1],O=Object(Re.b)("(max-width: 760px)");Object(a.useEffect)((function(){f("number"===typeof l?(l/100).toFixed(2):void 0)}),[l]);var h=O?"6fr":"4fr";return Object(ce.jsx)(oe.e,{p:O?"8px 10px":"8px 20px",children:Object(ce.jsxs)(oe.d,{alignItems:"center",justifyContent:"space-around",title:d||"",width:"100%",templateColumns:"".concat("3fr"," ").concat(h," ").concat("3fr"),justifyItems:"center",children:[Object(ce.jsx)(De.b,{margin:"0",children:t}),Object(ce.jsx)(Fe.a,{value:null===j?void 0:j,onBlur:function(e){var t=e.target.value,a=Math.floor(100*Number(t));if(a!==l){var r=""===t||null===t||void 0===t?null:a,c=a%1,s=isNaN(a),u=a%o;if(/\.$/gi.test(t))b("Error [LooseCountInput] at isPartialInput test: value contains a trailling full stop.");else if(c)b("Error [LooseCoinInput] at minimumValueTest: value entered is bellow the value of this denomination: value: ".concat(t,", denomination: ").concat(o/100));else if(s)b("Error [LooseCoinInput] at nanTest: value entered is not a number: value: ".concat(t));else if(u)b("Error [LooseCoinInput] at outOfStepTest: value entered is incompatible with the denomination's min value: value: ".concat(t,", denomination: ").concat(o/100));else{var d=Object(Ie.a)({},n,r);console.log("dispatching",d),b(null),i({type:I.UPDATE_LOOSE,payload:d})}}},children:Object(ce.jsx)(Fe.b,{onChange:function(e){return t=e.target.value,console.log(typeof t,t),void f(t);var t},value:null===j?void 0:j,bgColor:"#f8f8f8",borderColor:"rgba(0,0,0,0)",borderRadius:"none",borderBottom:"2px solid",borderBottomColor:"theme_light.text.lighter",boxShadow:d?"0 0 0 2px #E75858":"none",title:"Amount of ".concat(t.toLowerCase()," in format \xa30.00").concat(d?"\n"+d:""),className:"tab_jump"})})]})})},Ye=function(){var e=Object(a.useContext)(Ne).state.data.loose.total;return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(oe.b,{}),Object(ce.jsx)(De.b,{marginTop:"10px",children:"Loose Coin"}),Object(ce.jsxs)(oe.d,{templateColumns:"1fr 1fr",autoRows:"auto",children:[Object(ce.jsx)(Je,{label:"\xa32",display:"pound",denomination:"pound_two",step:200}),Object(ce.jsx)(Je,{label:"\xa31",display:"pound",denomination:"pound_one",step:100}),Object(ce.jsx)(Je,{label:"50p",display:"pence",denomination:"pence_fifty",step:50}),Object(ce.jsx)(Je,{label:"20p",display:"pence",denomination:"pence_twenty",step:20}),Object(ce.jsx)(Je,{label:"10p",display:"pence",denomination:"pence_ten",step:10}),Object(ce.jsx)(Je,{label:"5p",display:"pence",denomination:"pence_five",step:5}),Object(ce.jsx)(Je,{label:"2p",display:"pence",denomination:"pence_two",step:2}),Object(ce.jsx)(Je,{label:"1p",display:"pence",denomination:"pence_one",step:1}),Object(ce.jsx)(oe.a,{}),Object(ce.jsx)(Je,{label:"Any Other Value",display:"pound",denomination:"other",step:1})]}),Object(ce.jsx)(Ue,{value:e,title:"total loose coin (\xa3)"})]})},Xe=function(e){var t=e.denomination,n=e.step,o=e.label,r=Object(a.useContext)(Ne),c=r.state,i=r.dispatch,l=c.data.notes[t],s=Object(a.useState)(null),u=Object(ue.a)(s,2),d=u[0],b=u[1],p=Object(a.useState)(null),g=Object(ue.a)(p,2),j=g[0],f=g[1];Object(a.useEffect)((function(){f(null===l?"":l/n)}),[l,n]);return Object(ce.jsx)(Fe.a,{px:"2em",value:null===j?void 0:j,children:Object(ce.jsx)(Fe.b,{onChange:function(e){return function(e){var o=Number(e);f(""===e||void 0===e||null===e?"":o);var a=o*n,r=isNaN(a),c=a<0,l=a>0&&a%n;if(r)b("Error in [handleNumberChange] at nanCheck: value is not a number: ".concat(a));else if(c)b("Error in [handleNumberChange] at zeroCheck: value is bellow zero: ".concat(a));else if(l)b("Error in [handleNumberChange] at stepCheck: value is an incompatible ammount: ".concat(a));else{b(null);var s=Object(Ie.a)({},t,void 0===e||null===e||""===e?null:a);i({type:I.UPDATE_NOTES,payload:s})}}(e.target.value)},value:null===j?void 0:j,bgColor:"#f8f8f8",borderColor:"rgba(0,0,0,0)",borderRadius:"none",borderBottom:"2px solid",borderBottomColor:"theme_light.text.lighter",boxShadow:d?"0 0 0 2px #E75858":"",title:"Number of individual ".concat(o," notes"),className:"tab_jump"})})},Ze=function(e){var t=e.denomination,n=e.step,o=e.label,r=Object(a.useState)(null),c=Object(ue.a)(r,2),i=c[0],l=c[1],s=Object(a.useContext)(Ne),u=s.state,d=s.dispatch,b=u.data.notes[t],p=Object(a.useState)(null),g=Object(ue.a)(p,2),j=g[0],f=g[1];Object(a.useEffect)((function(){f("number"===typeof b?b/100:"")}),[b,n]);return Object(ce.jsx)(Fe.a,{px:"2em",title:"Number of individual ".concat(o," notes ").concat(i?"\n"+i:""),value:Be(j),children:Object(ce.jsx)(Fe.b,{onChange:function(e){return function(e){var o=Number(e),a=100*o;f(""===e||void 0===e||null===e?"":e);var r=n/100,c=o/r,i=c<0,s=c>0&&o%r;if(isNaN(c))l('Error in [handleValueChange] at "Nan Check": value is not a number: '.concat(c));else if(i)l('Error in [handleValueChange] at "Zero Check": value is bellow zero: '.concat(c));else if(s)l('Error in [handleValueChange] at "Step Check": value is an incompatible ammount: '.concat(c));else{l(null);var u=Object(Ie.a)({},t,""===e||null===e||void 0===e?null:a);d({type:I.UPDATE_NOTES,payload:u})}}(e.target.value)},value:Be(j),bgColor:"#f8f8f8",borderColor:"rgba(0,0,0,0)",borderRadius:"none",borderBottom:"2px solid",borderBottomColor:"theme_light.text.lighter",boxShadow:i?"0 0 0 2px #E75858":"",className:"tab_jump"})})},Ke=function(e){var t=e.label,n=e.step,o=e.denomination;return Object(ce.jsx)(oe.e,{p:"8px 20px",children:Object(ce.jsxs)(oe.d,{alignItems:"center",justifyContent:"space-around",width:"100%",templateColumns:"100px 1fr 1fr",justifyItems:"center",children:[Object(ce.jsx)(De.b,{margin:"0",children:t}),Object(ce.jsx)(Xe,{step:n,denomination:o,label:t}),Object(ce.jsx)(Ze,{step:n,denomination:o,label:t})]})})},Qe=function(){var e=Object(a.useContext)(Ne).state.data.notes.total;return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(oe.b,{}),Object(ce.jsx)(De.b,{marginTop:"10px",title:"Notes in the till or Uncounted Pickups is this was a spot check. (Uncounted Pickups are notes which were in the safe during a pickup but not yet processed. Hence VBS would have assumed they were still in the till.",children:"Notes / Uncounted Pickups"}),Object(ce.jsxs)(oe.e,{colStart:1,colEnd:-1,children:[Object(ce.jsxs)(oe.c,{direction:"column",children:[Object(ce.jsxs)(oe.d,{p:"8px 20px",alignItems:"center",justifyContent:"space-around",width:"100%",templateColumns:"100px 1fr 1fr",justifyItems:"center",children:[Object(ce.jsx)(oe.a,{}),Object(ce.jsx)(De.b,{children:"Number"}),Object(ce.jsx)(De.b,{children:"Value"})]}),Object(ce.jsx)(Ke,{label:"\xa350",step:5e3,denomination:"note_fifty"}),Object(ce.jsx)(Ke,{label:"\xa320",step:2e3,denomination:"note_twenty"}),Object(ce.jsx)(Ke,{label:"\xa310",step:1e3,denomination:"note_ten"}),Object(ce.jsx)(Ke,{label:"\xa35",step:500,denomination:"note_five"}),Object(ce.jsx)(Ke,{label:"\xa31 (Scottish)",step:100,denomination:"note_one"})]}),Object(ce.jsx)(Ue,{value:e,title:"total value of notes (\xa3)"})]})]})},$e=function(){var e=Object(a.useContext)(Ne),t=e.state,n=e.dispatch,o=Object(l.c)((function(e){return e.repositories.repositoryList}));return Object(ce.jsx)(oe.a,{p:"10px 0 20px",children:Object(ce.jsx)(Pe,{w:"50%",value:t.repositoryId||void 0,onChange:function(e){return n({type:I.UPDATE_REPO,payload:e.target.value})},children:o.map((function(e){return Object(ce.jsx)("option",{value:e.id,children:e.name},e.id)}))})})},qe=n(56),et=n.n(qe),tt=n(154),nt=function(e){return Object(ce.jsxs)(oe.a,{border:"2px solid",display:"inline-flex",color:"theme_light.text.light",borderColor:"theme_light.text.lighter",p:"2px 16px",fontSize:"18px",position:"relative",alignItems:"center",title:e.title||"pick a date",transition:".1s linear",_hover:{color:"theme_light.text.standard",borderColor:"theme_light.text.light"},children:[Object(ce.jsx)(et.a,Object(g.a)({},e)),Object(ce.jsx)(re.b,{})]})},ot=function(e){return Object(ce.jsxs)(oe.a,{border:"2px solid",display:"inline-flex",color:"theme_light.text.light",borderColor:"theme_light.text.lighter",p:"2px 16px",fontSize:"18px",position:"relative",alignItems:"center",title:e.title||"select a time",transition:".1s linear",_hover:{color:"theme_light.text.standard",borderColor:"theme_light.text.light"},children:[Object(ce.jsx)(et.a,Object(g.a)({},e)),Object(ce.jsx)(re.h,{})]})};Object(qe.registerLocale)("gb",tt.a),Object(qe.setDefaultLocale)("gb");var at=function(){var e=Object(a.useContext)(Ne),t=e.state.timestamp,n=e.dispatch,o=function(e){n({type:I.UPDATE_TIME,payload:e})};return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(De.b,{children:"Date"}),Object(ce.jsxs)(oe.c,{w:"100%",justifyContent:"space-around",flexWrap:"wrap",children:[Object(ce.jsxs)(oe.c,{flexWrap:"wrap",justifyContent:"center",children:[Object(ce.jsx)(nt,{flex:"1",selected:t,onChange:o,name:"Date Start",locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"dd/MM/yyyy"}),Object(ce.jsx)(ot,{flex:"1",selected:t,onChange:o,name:"Date Start",showTimeSelect:!0,showTimeSelectOnly:!0,locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"HH:mm"})]}),Object(ce.jsx)(ae.a,{variant:"ui",onClick:function(){return n({type:I.UPDATE_TIME,payload:Date.now()})},children:"Count Now"})]})]})},rt=n(147),ct=n(146),it=function(){var e=Object(a.useState)(!1),t=Object(ue.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(void 0),c=Object(ue.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)(!1),d=Object(ue.a)(u,2),b=d[0],p=d[1],g=Object(a.useState)(null),f=Object(ue.a)(g,2),O=f[0],h=f[1],m=Object(a.useState)(null),x=Object(ue.a)(m,2),v=x[0],_=x[1],y=Object(l.c)((function(e){return e.auth.partnerList})),E=Object(l.b)(),S=Object(Q.h)(),P=Object(a.useRef)(),C=Object(Q.g)(),T=function(){return o(!1)};return Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(ct.a,{isOpen:n,leastDestructiveRef:P,size:"lg",onClose:function(){},closeOnEsc:!0,closeOnOverlayClick:!0,blockScrollOnMount:!0,children:Object(ce.jsx)(ct.g,{children:Object(ce.jsxs)(ct.d,{w:"800px",children:[Object(ce.jsxs)(ct.f,{children:["Are you sure you want to delete this count?",Object(ce.jsx)(ct.c,{onClick:T})]}),Object(ce.jsxs)(ct.b,{children:["This cannot be undone except by a duty manager.",Object(ce.jsx)(oe.i,{marginTop:"20px",color:"theme_light.ui.dangerDark",children:O||""})]}),Object(ce.jsx)(ct.e,{flexDirection:"row-reverse",children:Object(ce.jsxs)(De.a,{children:[Object(ce.jsx)(De.b,{marginBottom:"30px",children:"Select your name to confirm the delete:"}),Object(ce.jsxs)(Pe,{value:i,onChange:function(e){s(e.target.value),_(null)},borderColor:v?"theme_light.ui.dangerLight":"theme_light.text.lighter",title:v||null,_hover:{borderColor:v?"theme_light.ui.dangerDark":"theme_light.text.light"},children:[Object(ce.jsx)("option",{value:"undefined",children:"-Select Your Partner ID-"}),y.map((function(e){return Object(ce.jsx)("option",{value:e.id,children:"".concat(e.firstName).concat(e.preferredName?" (".concat(e.preferredName,")"):""," ").concat(e.lastName," - ").concat(e.tillNumber)},e.id)}))]}),Object(ce.jsxs)(oe.c,{justifyContent:"space-between",marginTop:"30px",children:[Object(ce.jsx)(ae.a,{variant:"dangerOutline",border:"none",h:"2rem",onClick:function(e){if(i&&""!==i&&void 0!==i&&"undefined"!==i){p(!0);var t="/api/v1/count/".concat(S.id);fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t,n;200===e.status?(E(function(){var e=Object(ee.a)(q.a.mark((function e(o){var a,r,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/v1/count?deleted=false&page=".concat(t||0,"&pagelength=").concat(n||10),console.log(a),e.next=4,fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,console.log(c),o({type:j.COUNTS_DATA_WRITE_ALL,payload:c.counts});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E(ne("Count Deleted","","info",5e3)),C("/counts")):(h(e.responseMessage||e.errorMessage),console.error(e.responseMessage||e.errorMessage),p(!1))})).catch((function(e){h(e.error),console.error(e),p(!1)}))}else _("Please select yourself from this list.")},disabled:b,children:"Delete this count"}),Object(ce.jsx)(ae.a,{ref:P,onClick:T,px:"40px",disabled:b,children:"Back to Safety"})]})]})})]})})}),Object(ce.jsx)(rt.c,{icon:Object(ce.jsx)(re.f,{}),onClick:function(e){e.preventDefault(),o(!n)},children:"Delete Count"})]})},lt=n(11);function st(e,t,n){var o={repositoryId:e.repositoryId,timestamp:e.timestamp,float:{bagPence1:e.data.bagged.pence_one,bagPence2:e.data.bagged.pence_two,bagPence5:e.data.bagged.pence_five,bagPence10:e.data.bagged.pence_ten,bagPence20:e.data.bagged.pence_twenty,bagPence50:e.data.bagged.pence_fifty,bagPound1:e.data.bagged.pound_one,bagPound2:e.data.bagged.pound_two,bagNote5:e.data.bagged.note_five,bagTotal:e.data.bagged.total,loosePence1:e.data.loose.pence_one,loosePence2:e.data.loose.pence_two,loosePence5:e.data.loose.pence_five,loosePence10:e.data.loose.pence_ten,loosePence20:e.data.loose.pence_twenty,loosePence50:e.data.loose.pence_fifty,loosePound1:e.data.loose.pound_one,loosePound2:e.data.loose.pound_two,looseOther:e.data.loose.other,looseTotal:e.data.loose.total,note1:e.data.notes.note_one,note5:e.data.notes.note_five,note10:e.data.notes.note_ten,note20:e.data.notes.note_twenty,note50:e.data.notes.note_fifty,noteTotal:e.data.notes.total,floatTotal:e.data.notes.total}};e.counterId?(o.counter="",o.counterId=Number(e.counterId)):(o.counterId=null,o.counter=e.counter),e.supervisorId?(o.supervisor="",o.supervisorId=Number(e.supervisorId)):(o.supervisorId=null,o.supervisor=e.supervisor),console.log(o);var a="/api/v1/count/".concat(e.id),r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:o})};fetch(a,r).then((function(e){return e.json()})).then((function(e){console.log(e);var n=e.validation.code;return 200===e.status?t(ne("Count updated","",n,8e3)):t(ne("There was an issue updating the count",e.errorMessage||e.responseMessage||"",n,8e3)),e})).then(n).catch((function(e){t(ne("Something went wrong.",e,"danger",8e3)),console.error(e)}))}function ut(e,t,n){var o={repositoryId:e.repositoryId,timestamp:e.timestamp,float:{bagPence1:e.data.bagged.pence_one,bagPence2:e.data.bagged.pence_two,bagPence5:e.data.bagged.pence_five,bagPence10:e.data.bagged.pence_ten,bagPence20:e.data.bagged.pence_twenty,bagPence50:e.data.bagged.pence_fifty,bagPound1:e.data.bagged.pound_one,bagPound2:e.data.bagged.pound_two,bagNote5:e.data.bagged.note_five,bagTotal:e.data.bagged.total,loosePence1:e.data.loose.pence_one,loosePence2:e.data.loose.pence_two,loosePence5:e.data.loose.pence_five,loosePence10:e.data.loose.pence_ten,loosePence20:e.data.loose.pence_twenty,loosePence50:e.data.loose.pence_fifty,loosePound1:e.data.loose.pound_one,loosePound2:e.data.loose.pound_two,looseOther:e.data.loose.other,looseTotal:e.data.loose.total,note1:e.data.notes.note_one,note5:e.data.notes.note_five,note10:e.data.notes.note_ten,note20:e.data.notes.note_twenty,note50:e.data.notes.note_fifty,noteTotal:e.data.notes.total,floatTotal:e.data.notes.total}};e.counterId?(o.counter="",o.counterId=Number(e.counterId)):(o.counterId=null,o.counter=e.counter),e.supervisorId?(o.supervisor="",o.supervisorId=Number(e.supervisorId)):(o.supervisorId=null,o.supervisor=e.supervisor);var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:o})};fetch("/api/v1/count/",a).then((function(e){return e.json()})).then((function(e){var n=e.validation.code;return 200===e.status?t(ne("New count created successfully","Count status: ".concat(n),"complete",8e3)):t(ne("There was an issue posting the new count",e.errorMessage||e.responseMessage||"",n,8e3)),e})).then(n).catch((function(e){console.error({error:e}),t(ne("Something went wrong.",e.error,"danger",8e3))}))}var dt=function(){var e=Object(a.useContext)(Ne).state,t=Object(l.b)();return Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsx)(rt.c,{onClick:function(){st(e,t)},icon:Object(ce.jsx)(lt.a,{as:He.a}),children:"Save"})})},bt=function(){return Object(ce.jsx)(oe.c,{justifyContent:"flex-end",fontSize:16,children:Object(ce.jsxs)(rt.a,{children:[Object(ce.jsx)(rt.b,{as:ae.b,"arial-label":"Options",icon:Object(ce.jsx)(re.g,{fontSize:"26px"}),variant:"ui"}),Object(ce.jsxs)(rt.d,{boxShadow:"0 5px 10px rgba(0,0,0,.3)",children:[Object(ce.jsx)(it,{}),Object(ce.jsx)(dt,{})]})]})})},pt=function(e){var t=e.total;return Object(ce.jsx)(oe.i,{fontSize:"32px",children:(t/100).toFixed(2)})},gt=function(e){var t=e.bagged,n=e.loose,o=e.notes;return Object(ce.jsx)(oe.i,{gridColumn:"2",color:"theme_light.text.lighter",marginTop:"10px",children:[t,n,o].filter((function(e){return void 0!==e})).map((function(e){return e/100})).map((function(e){return e.toFixed(2)})).join(" + ")})},jt=function(){var e=Object(a.useContext)(Ne).state,t=e.data.bagged.total,n=e.data.loose.total,o=e.data.notes.total;return Object(ce.jsxs)(oe.a,{children:[Object(ce.jsx)(oe.b,{}),Object(ce.jsxs)(oe.d,{templateColumns:"1fr 1fr",templateRows:"auto auto",justifyItems:"center",p:"40px 10px 10px",children:[Object(ce.jsx)(oe.e,{display:"flex",alignItems:"center",children:Object(ce.jsx)(oe.f,{as:"h3",children:"Till Total"})}),Object(ce.jsx)(oe.e,{display:"flex",alignItems:"center",children:Object(ce.jsx)(pt,{total:t+n+o})}),Object(ce.jsx)(gt,{bagged:t,loose:n,notes:o})]})]})};var ft,Ot=function(e,t){switch(t.type){case I.WRITE_ALL:return console.log(t.payload),Object(g.a)(Object(g.a)({},t.payload),{},{ready:!0});case I.SET_READY:return Object(g.a)(Object(g.a)({},e),{},{ready:!0});case I.UPDATE_REPO:return Object(g.a)(Object(g.a)({},e),{},{repositoryId:t.payload});case I.UPDATE_COUTNER:return Object(g.a)(Object(g.a)({},e),{},{counter:t.payload.counter,counterId:t.payload.counterId||e.counterId});case I.UPDATE_SUPERVISOR:return Object(g.a)(Object(g.a)({},e),{},{supervisor:t.payload.supervisor,supervisorId:t.payload.supervisorId});case I.UPDATE_TIME:return Object(g.a)(Object(g.a)({},e),{},{timestamp:t.payload});case I.UPDATE_BAG:return function(e,t){var n=Object(g.a)(Object(g.a)({},e.data.bagged),t.payload),o=Object.keys(n).filter((function(e){return"total"!==e})).reduce((function(e,t){return e+n[t]}),0);return Object(g.a)(Object(g.a)({},e),{},{data:Object(g.a)(Object(g.a)({},e.data),{},{bagged:Object(g.a)(Object(g.a)({},n),{},{total:o})})})}(e,t);case I.UPDATE_LOOSE:return function(e,t){var n=Object(g.a)(Object(g.a)({},e.data.loose),t.payload),o=Object.keys(n).filter((function(e){return"total"!==e})).reduce((function(e,t){return e+n[t]}),0);return Object(g.a)(Object(g.a)({},e),{},{data:Object(g.a)(Object(g.a)({},e.data),{},{loose:Object(g.a)(Object(g.a)({},n),{},{total:o})})})}(e,t);case I.UPDATE_NOTES:return function(e,t){var n=Object(g.a)(Object(g.a)({},e.data.notes),t.payload),o=Object.keys(n).filter((function(e){return"total"!==e})).reduce((function(e,t){return e+n[t]}),0);return Object(g.a)(Object(g.a)({},e),{},{data:Object(g.a)(Object(g.a)({},e.data),{},{notes:Object(g.a)(Object(g.a)({},n),{},{total:o})})})}(e,t);default:return e}},ht={id:null,repository:Le[0],repositoryId:null,counter:"",counterId:"",supervisor:"",supervisorId:"",data:{bagged:{pence_one:null,pence_two:null,pence_five:null,pence_ten:null,pence_twenty:null,pence_fifty:null,pound_one:null,pound_two:null,note_five:null,total:null},loose:{pence_one:null,pence_two:null,pence_five:null,pence_ten:null,pence_twenty:null,pence_fifty:null,pound_one:null,pound_two:null,other:null,total:null},notes:{note_one:null,note_five:null,note_ten:null,note_twenty:null,note_fifty:null,total:null},total:0},timestamp:Date.now(),ready:!1,verified:!1},mt=function(e){var t=e.edit,n=Object(Q.g)(),o=Object(a.useContext)(Ne).state,r=Object(l.b)();return Object(ce.jsx)(ae.a,{variant:"link",size:"lg",py:"16px",onClick:function(){t?(console.log("Send ajax to PUT, show flash"),st(o,r)):(console.log("Send ajax POST, show flash"),ut(o,r,(function(e){var t="/count/".concat(e.count.id);return console.log("redirecting to: ",t),n(t)})))},children:"Save"})},xt=function(e){var t=e.edit,n=Object(a.useContext)(Ne).state,o=Object(l.b)(),r=Object(Q.g)();return Object(ce.jsx)(ae.a,{variant:"outline",bgColor:"#fff",size:"lg",mx:"3em",onClick:function(){t?(console.log("Send ajax to PUT, show flash"),st(n,o,(function(){r(-1)}))):(console.log("Perform Validation, Show confirmation, send ajax to POST, show flash"),ut(n,o,(function(e){return r(-1)})))},children:"Save and Close"})},vt=function(e){var t=e.edit,n=Object(a.useContext)(Ne).state,o=Object(l.b)(),r=Object(Q.g)();return Object(ce.jsxs)(ae.a,{size:"lg",py:"12px",onClick:function(){t?(console.log("Send ajax to PUT, redirect to /count/new"),st(n,o,(function(){r("/count/new")}))):(console.log("Perform Validation, Show confirmation, send ajax to POST, redirect to /count/new"),ut(n,o,(function(e){r("/count/new")})))},children:["Save & Next ",Object(ce.jsx)(re.d,{})]})},_t=function(e){var t=e.edit;return Object(ce.jsxs)(oe.c,{border:"1px dashed",borderColor:"rgba(155,0,0,0)",alignItems:"center",justifyContent:"center",py:"1em",my:"3em",position:"sticky",bottom:"0px",flexWrap:"wrap",children:[Object(ce.jsx)(mt,{edit:t}),Object(ce.jsx)(xt,{edit:t}),Object(ce.jsx)(vt,{edit:t})]})},yt=function(e){var t=e.edit,n=Object(Q.h)(),o=Object(l.c)((function(e){return e.repositories.repositoryList})),r=Object(a.useReducer)(Ot,ht),c=Object(ue.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)(null),d=Object(ue.a)(u,2),b=d[0],p=d[1];return Object(a.useEffect)((function(){var e=function(){return s({type:I.SET_READY,payload:{}})};if(!t){if(o.length)return s({type:I.WRITE_ALL,payload:Object(g.a)(Object(g.a)({},ht),{},{repositoryId:o[0].id})}),e();return fetch("/api/v1/repository?limit=1",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s({type:I.WRITE_ALL,payload:Object(g.a)(Object(g.a)({},ht),{},{repositoryId:e.repositories[0].id})})})),e()}var a="/api/v1/count/".concat(n.id);fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e.status>100&&e.status<300){var t=e.count[0],n={id:t.id,repository:"".concat(t.repositoryId),repositoryId:t.repositoryId,timestamp:t.timestamp,counter:ke(t.counter),counterId:t.counterId,supervisor:ke(t.supervisor),supervisorId:t.supervisorId,ready:!1,verified:Boolean(t.verified),data:{bagged:{pence_one:t.float.bagPence1,pence_two:t.float.bagPence2,pence_five:t.float.bagPence5,pence_ten:t.float.bagPence10,pence_twenty:t.float.bagPence20,pence_fifty:t.float.bagPence50,pound_one:t.float.bagPound1,pound_two:t.float.bagPound2,note_five:t.float.bagNote5,total:t.float.bagTotal},loose:{pence_one:t.float.loosePence1,pence_two:t.float.loosePence2,pence_five:t.float.loosePence5,pence_ten:t.float.loosePence10,pence_twenty:t.float.loosePence20,pence_fifty:t.float.loosePence50,pound_one:t.float.loosePound1,pound_two:t.float.loosePound2,other:t.float.looseOther,total:t.float.looseTotal},notes:{note_one:t.float.note1,note_five:t.float.note5,note_ten:t.float.note10,note_twenty:t.float.note20,note_fifty:t.float.note50,total:t.float.noteTotal},total:t.float.floatTotal}};p(t.createdOn),s({type:I.WRITE_ALL,payload:n})}else console.error(e.errorMessage)})).catch((function(e){return console.error(e)}))}),[t,n.id,s]),t&&!i.ready?Object(ce.jsxs)(oe.c,{direction:"column",children:[Object(ce.jsx)(ve.a,{height:"30px",my:"4px"}),Object(ce.jsx)(ve.a,{height:"30px",my:"4px"}),Object(ce.jsx)(ve.a,{height:"30px",my:"4px"})]}):Object(ce.jsxs)(Ne.Provider,{value:{state:i,dispatch:s},children:["number"===typeof b?Object(ce.jsxs)(oe.i,{children:["Count originally created ",new Date(b||"").toLocaleString("en-GB")]}):"",Object(ce.jsx)(oe.i,{wordBreak:"break-all"}),Object(ce.jsxs)(oe.c,{flexDirection:"column",children:[t?Object(ce.jsx)(bt,{}):"",Object(ce.jsx)($e,{}),Object(ce.jsxs)(oe.c,{flexDirection:"column",bgColor:"#fff",p:"3em 1em",m:"0 0 3em",children:[Object(ce.jsx)(at,{}),Object(ce.jsxs)(oe.c,{justifyContent:"space-around",m:"30px 0",children:[Object(ce.jsx)(ze,{label:"Counter",dispatchType:I.UPDATE_COUTNER,stateAssignment:"counter"}),Object(ce.jsx)(ze,{label:"Supervisor",dispatchType:I.UPDATE_SUPERVISOR,stateAssignment:"supervisor"})]}),Object(ce.jsx)(Ve,{}),Object(ce.jsx)(Ye,{}),Object(ce.jsx)(Qe,{}),Object(ce.jsx)(jt,{}),Object(ce.jsx)(_t,{edit:t})]})]})]})},Et=Object(a.createContext)({}),St=new Date("2021-03-30"),Pt={repo:void 0,startTime:new Date(St.getTime()-3024e6),endTime:new Date(St),adjustYAxisRenderPosition:!1,adjustmentStepSize:.2,inspecting:void 0,constants:{WIDTH:1200,HEIGHT:500,Y_PADDING:20},data:[],parsedCountBags:{bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]},xAxisLabels:[],crosshair:void 0,crosshairX:void 0,focusedSeries:[],hoverSeries:void 0},Ct=n(145);!function(e){e.REPO_SET="REPO_SET",e.START_DATE_SET="START_DATE_SET",e.END_DATE_SET="END_DATE_SET",e.ADJUSTMENTS_USE_SET="ADJUSTMENTS_USE_SET",e.ADJUSTMENT_STEP_SIZE_SET="ADJUSTMENT_STEP_SIZE_SET",e.INSPECTING_SET="INSPECTING_SET",e.INSPECTING_CLEAR="INSPECTING_CLEAR",e.DATA_SET="DATA_SET",e.PARSED_DATA_BAGS_SET="PARSED_DATA_BAGS_SET",e.CROSSHAIR_SET="CROSSHAIR_SET",e.CROSSHAIR_CLEAR="CROSSHAIR_CLEAR",e.CROSSHAIR_POSITION_SET="CROSSHAIR_POSITION_SET",e.SERIES_HOVER_SET="SERIES_HOVER_SET",e.SERIES_HOVER_CLEAR="SERIES_HOVER_CLEAR"}(ft||(ft={}));var Tt=function(){return{type:ft.INSPECTING_CLEAR}},At=function(){var e=Object(a.useContext)(Et),t=e.contextState,n=e.contextDispatch,o=Object(l.c)((function(e){return e.repositories.repositoryList})),r=t.repo;return Object(ce.jsx)(Pe,{onChange:function(e){return n(function(e){return{type:ft.REPO_SET,payload:e}}(e.target.value))},value:r,w:"250px",children:o.map((function(e){return Object(ce.jsx)("option",{value:e.id,children:e.name},e.id)}))})},wt=function(){var e=Object(a.useContext)(Et),t=e.contextState,n=e.contextDispatch,o=t.startTime,r=t.endTime,c=t.useAdjustments,i=t.adjustmentStepSize;return Object(ce.jsxs)(oe.c,{alignItems:"center",children:[Object(ce.jsx)("p",{children:"Top Control Group"}),Object(ce.jsx)(At,{}),Object(ce.jsx)(nt,{flex:"1",selected:o,onChange:function(e){return n((t=e,{type:ft.START_DATE_SET,payload:t}));var t},name:"Date Start",locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"dd/MM/yyyy"}),Object(ce.jsx)(nt,{flex:"1",selected:r,onChange:function(e){return n((t=e,{type:ft.END_DATE_SET,payload:t}));var t},name:"Date Start",locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"dd/MM/yyyy"}),Object(ce.jsxs)(ae.a,{onClick:function(){return n(function(e){return{type:ft.ADJUSTMENTS_USE_SET,payload:e}}(!c))},variant:"ui",children:["Adjustments: ",c?"ON":"OFF"]}),Object(ce.jsxs)(Ct.a,{min:.05,max:.8,step:.01,value:i,onChange:function(e){return n((t=e,{type:ft.ADJUSTMENT_STEP_SIZE_SET,payload:t}));var t},width:"200px",children:[Object(ce.jsx)(Ct.d,{children:Object(ce.jsx)(Ct.b,{})}),Object(ce.jsx)(Ct.c,{})]})]})};var Dt=function(e,t){switch(t.type){case ft.REPO_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{repo:t.payload})}(e,t);case ft.START_DATE_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{startTime:t.payload})}(e,t);case ft.END_DATE_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{endTime:t.payload})}(e,t);case ft.ADJUSTMENTS_USE_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adjustYAxisRenderPosition:t.payload})}(e,t);case ft.ADJUSTMENT_STEP_SIZE_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adjustmentStepSize:t.payload})}(e,t);case ft.INSPECTING_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{inspecting:t.payload})}(e,t);case ft.INSPECTING_CLEAR:return function(e){return Object(g.a)(Object(g.a)({},e),{},{inspecting:void 0})}(e);case ft.DATA_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{data:t.payload})}(e,t);case ft.PARSED_DATA_BAGS_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{parsedCountBags:t.payload})}(e,t);case ft.CROSSHAIR_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{crosshair:t.payload})}(e,t);case ft.CROSSHAIR_POSITION_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{crosshairX:t.payload})}(e,t);case ft.CROSSHAIR_CLEAR:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{crosshair:void 0,crosshairX:void 0})}(e);case ft.SERIES_HOVER_SET:return function(e,t){return Object(g.a)(Object(g.a)({},e),{},{hoverSeries:t.payload})}(e,t);case ft.SERIES_HOVER_CLEAR:return function(e){return Object(g.a)(Object(g.a)({},e),{},{hoverSeries:void 0})}(e);default:return e}},It=n(153),Rt=Object(je.b)({textAlign:"left",fontSize:"8px",padding:"6px",borderRadius:"5px",pointerEvents:"none",boxShadow:"5px 5px 5px rgba(0,0,0,.3)",background:"#3A3A48",margin:"5px",boxSizing:"border-box",color:"#fff"}),Ft=["January","February","March","April","May","June","July","August","Septmber","October","November","December"],Nt=function(){var e=Object(l.c)((function(e){return e.ui.colours})),t=Object(a.useContext)(Et),n=t.contextState,o=t.contextDispatch,r=n.inspecting,c=n.data,i=n.constants,s=i.WIDTH,u=i.HEIGHT,d=i.Y_PADDING,b=n.parsedCountBags,p=n.crosshair,j=n.crosshairX,f=n.hoverSeries,O=function(e){o(function(e){return{type:ft.INSPECTING_SET,payload:e}}(e))},h=function(){o(Tt())},m=function(e){console.log("seriesMouseOver",e),o(function(e){return{type:ft.SERIES_HOVER_SET,payload:e}}(e))},x=function(e){console.log("seriesMouseOut",e),o({type:ft.SERIES_HOVER_CLEAR})},v=function(e){console.log("seriesClick",e)},_=function(t){switch(t){case"Bagged \xa35":case"bagNote5":return e.red;case"Bagged \xa32":case"bagPound2":return e.green;case"Bagged \xa31":case"bagPound1":return e.blue;case"Bagged 50p":case"bagPence50":return e.orange;case"Bagged 20p":case"bagPence20":return e.yellow;case"Bagged 10p":case"bagPence10":return e.teal;case"Bagged 5p":case"bagPence5":return e.black;case"Bagged 2p":case"bagPence2":return e.gold;case"Bagged 1p":case"bagPence1":return e.liveRed;default:return e.purple}},y={fontSize:12,color:"#fff"},E={fontSize:10,color:"#fff"},S=20;return Object(je.c)("div",null,Object(je.c)(fe.g,{width:s,height:u,yPadding:d,onMouseLeave:function(){return o(Tt())},style:{position:"relative"}},Object(je.c)(fe.c,null),Object(je.c)(fe.f,{title:"Days",orientation:"bottom",tickFormat:function(e){var t=Number(e);if(c&&c[t]){var n=c[t].timestamp,o=new Date;return"number"===typeof n&&(o=new Date(n)),"".concat(o.getDate()," ").concat(Ft[o.getMonth()]," - \n").concat(o.toLocaleTimeString())}return""}}),Object(je.c)(fe.h,{title:"Baggs",orientation:"left"}),Object(je.c)(fe.d,{data:b.bagPound2,fill:_("bagPound2"),color:_("bagPound2"),onSeriesMouseOver:function(){return m("bagPound2")},onSeriesMouseOut:function(){return x("bagPound2")},onSeriesClick:function(){return v("bagPound2")},style:f&&"bagPound2"===f?{strokeWidth:4}:{strokeWidth:2}}),Object(je.c)(fe.d,{fill:"none",data:b.bagPound1,color:_("bagPound1"),onSeriesMouseOver:function(){return m("bagPound1")},onSeriesMouseOut:function(){return x("bagPound1")},onSeriesClick:function(){return v("bagPound1")}}),Object(je.c)(fe.d,{fill:"none",data:b.bagPence50,color:_("bagPence50"),onSeriesMouseOver:function(){return m("bagPence50")},onSeriesMouseOut:function(){return x("bagPence50")},onSeriesClick:function(){return v("bagPence50")}}),Object(je.c)(fe.d,{fill:"none",data:b.bagPence20,color:_("bagPence20"),onSeriesMouseOver:function(){return m("bagPence20")},onSeriesMouseOut:function(){return x("bagPence20")},onSeriesClick:function(){return v("bagPence20")}}),Object(je.c)(fe.d,{fill:"none",data:b.bagPence10,color:_("bagPence10"),onSeriesMouseOver:function(){return m("bagPence10")},onSeriesMouseOut:function(){return x("bagPence10")},onSeriesClick:function(){return v("bagPence10")}}),Object(je.c)(fe.d,{fill:"none",data:b.bagPence5,color:_("bagPence5"),onSeriesMouseOver:function(){return m("bagPence5")},onSeriesMouseOut:function(){return x("bagPence5")},onSeriesClick:function(){return v("bagPence5")}}),Object(je.c)(fe.d,{fill:"none",data:b.bagPence2,color:_("bagPence2"),onSeriesMouseOver:function(){return m("bagPence2")},onSeriesMouseOut:function(){return x("bagPence2")},onSeriesClick:function(){return v("bagPence2")}}),Object(je.c)(fe.d,{fill:"none",data:b.bagPence1,color:_("bagPence1"),onSeriesMouseOver:function(){return m("bagPence1")},onSeriesMouseOut:function(){return x("bagPence1")},onSeriesClick:function(){return v("bagPence1")}}),Object(je.c)(fe.e,{data:b.bagPound2,onValueMouseOver:O,onValueMouseOut:h,color:"rgba(0,0,0,0)",_sizeValue:S}),Object(je.c)(fe.e,{className:"bagged-pound-two",data:b.bagPound2,onValueMouseOver:O,color:_("bagPound2"),onNearestX:function(e){var t=Number(e.x),n=c[t];if(o(function(e){return{type:ft.CROSSHAIR_POSITION_SET,payload:e}}(t)),!p||p.countId!==n.id){var a=new Date(n.timestamp||""),r=Object(g.a)({countId:Number(n.id),title:"",time:a.toLocaleTimeString(),date:a.toLocaleDateString()},n.float);o(function(e){return{type:ft.CROSSHAIR_SET,payload:e}}(r))}},onSeriesMouseOver:function(){return m("bagPound2")},onSeriesMouseOut:function(){return x("bagPound2")},onSeriesClick:function(){return v("bagPound2")}}),Object(je.c)(fe.e,{data:b.bagPound1,onValueMouseOver:O,onValueMouseOut:h,color:"rgba(0,0,0,0)",_sizeValue:S}),Object(je.c)(fe.e,{className:"bagged-pound-one",data:b.bagPound1,onValueMouseOver:O,color:_("bagPound1"),onSeriesMouseOver:function(){return m("bagPound1")},onSeriesMouseOut:function(){return x("bagPound1")},onSeriesClick:function(){return v("bagPound1")}}),Object(je.c)(fe.e,{data:b.bagPence50,onValueMouseOver:O,onValueMouseOut:h,color:"rgba(0,0,0,0)",_sizeValue:S}),Object(je.c)(fe.e,{className:"bagged-pence-fifty",data:b.bagPence50,onValueMouseOver:O,color:_("bagPence50"),onSeriesMouseOver:function(){return m("bagPence50")},onSeriesMouseOut:function(){return x("bagPence50")},onSeriesClick:function(){return v("bagPence50")}}),Object(je.c)(fe.e,{data:b.bagPence20,onValueMouseOver:O,onValueMouseOut:h,color:"rgba(0,0,0,0)",_sizeValue:S}),Object(je.c)(fe.e,{className:"bagged-pence-twenty",data:b.bagPence20,onValueMouseOver:O,color:_("bagPence20"),onSeriesMouseOver:function(){return m("bagPence20")},onSeriesMouseOut:function(){return x("bagPence20")},onSeriesClick:function(){return v("bagPence20")}}),Object(je.c)(fe.e,{data:b.bagPence10,onValueMouseOver:O,onValueMouseOut:h,color:"rgba(0,0,0,0)",_sizeValue:S}),Object(je.c)(fe.e,{className:"bagged-pence-ten",data:b.bagPence10,onValueMouseOver:O,color:_("bagPence10"),onSeriesMouseOver:function(){return m("bagPence10")},onSeriesMouseOut:function(){return x("bagPence10")},onSeriesClick:function(){return v("bagPence10")}}),Object(je.c)(fe.e,{data:b.bagPence5,onValueMouseOver:O,onValueMouseOut:h,color:"rgba(0,0,0,0)",_sizeValue:S}),Object(je.c)(fe.e,{className:"bagged-pence-five",data:b.bagPence5,onValueMouseOver:O,color:_("bagPence5"),onSeriesMouseOver:function(){return m("bagPence5")},onSeriesMouseOut:function(){return x("bagPence5")},onSeriesClick:function(){return v("bagPence5")}}),Object(je.c)(fe.e,{data:b.bagPence2,onValueMouseOver:O,onValueMouseOut:h,color:"rgba(0,0,0,0)",_sizeValue:S}),Object(je.c)(fe.e,{className:"bagged-pence-two",data:b.bagPence2,onValueMouseOver:O,color:_("bagPence2"),onSeriesMouseOver:function(){return m("bagPence2")},onSeriesMouseOut:function(){return x("bagPence2")},onSeriesClick:function(){return v("bagPence2")}}),Object(je.c)(fe.e,{data:b.bagPence1,onValueMouseOver:O,onValueMouseOut:h,color:"rgba(0,0,0,0)",_sizeValue:S}),Object(je.c)(fe.e,{className:"bagged-pence-one",data:b.bagPence1,onValueMouseOver:O,color:_("bagPence1"),onSeriesMouseOver:function(){return m("bagPence1")},onSeriesMouseOut:function(){return x("bagPence1")},onSeriesClick:function(){return v("bagPence1")}}),null!==r&&void 0!==r&&Object(je.c)(fe.b,{value:r},Object(je.c)(oe.a,{css:Rt,borderTop:"5px solid ".concat(_(r.label))},Object(je.c)(oe.i,y,r.label),Object(je.c)(oe.i,y,"Quantity: ",Math.round(Number(r.y))))),null!==p&&void 0!==p&&Object(je.c)(fe.a,{values:[{x:j}]},Object(je.c)(oe.a,{css:Rt,transform:"translateY(-100%)"},p.title&&p.title.length&&Object(je.c)(oe.i,E,p.title),Object(je.c)(oe.i,Object(It.a)({},E,{whiteSpace:"nowrap"}),p.date,", ",p.time)))),"Whyyyyyyyyyyyyyyyyyyyyyy ",f)},Lt=function(){var e=Object(a.useReducer)(Dt,Pt),t=Object(ue.a)(e,2),n=t[0],o=t[1],r=n.startTime,c=n.endTime,i=n.adjustYAxisRenderPosition,l=n.repo,s=n.adjustmentStepSize,u=n.inspecting,d=n.data;return Object(a.useEffect)((function(){var e="/api/v1/count?fromdate=".concat(r.getTime(),"&todate=").concat(c.getTime(),"&float=true&repository=").concat(l);console.log(e);fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),o(function(e){return{type:ft.DATA_SET,payload:e}}(e.counts.sort((function(e,t){return Number(e.timestamp)-Number(t.timestamp)}))))}))}),[l,c,r]),Object(a.useEffect)((function(){var e,t=d.map((function(e){var t={bagNote5:500,bagPound2:2e3,bagPound1:2e3,bagPence50:1e3,bagPence20:1e3,bagPence10:500,bagPence5:500,bagPence2:100,bagPence1:100},n=Object(g.a)({},e.float),o=["bagNote5","bagPound2","bagPound1","bagPence50","bagPence20","bagPence10","bagPence5","bagPence2","bagPence1"].map((function(t){return{label:t,value:Number(e.float[t])||0}})).sort((function(e,t){return e.value-t.value})),a=[];return o.forEach((function(e){0===a.length||e.value===a[0].value?a.push(e):function(e){for(var o=a.length,r=Math.ceil(o/2),c=1-r,l=0;c<=o-r;c++,l++){var u=a[l].label,d=a[l].value,b=i?c*s*t[u]:0;n[u]=d+b}a.length=0,a.push(e)}(e)})),Object(g.a)(Object(g.a)({},e),{},{float:n})})).reduce((function(e,t,n){var o=Object(g.a)({},e);function a(e){var o,a,r,c,i,l,s,u,d,b=0,p=t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):"";switch(e){case"Bagged \xa35":b=((null===(o=t.float)||void 0===o?void 0:o.bagNote5)||0)/500;break;case"Bagged \xa32":b=((null===(a=t.float)||void 0===a?void 0:a.bagPound2)||0)/2e3;break;case"Bagged \xa31":b=((null===(r=t.float)||void 0===r?void 0:r.bagPound1)||0)/2e3;break;case"Bagged 50p":b=((null===(c=t.float)||void 0===c?void 0:c.bagPence50)||0)/1e3;break;case"Bagged 20p":b=((null===(i=t.float)||void 0===i?void 0:i.bagPence20)||0)/1e3;break;case"Bagged 10p":b=((null===(l=t.float)||void 0===l?void 0:l.bagPence10)||0)/500;break;case"Bagged 5p":b=((null===(s=t.float)||void 0===s?void 0:s.bagPence5)||0)/500;break;case"Bagged 2p":b=((null===(u=t.float)||void 0===u?void 0:u.bagPence2)||0)/100;break;case"Bagged 1p":b=((null===(d=t.float)||void 0===d?void 0:d.bagPence1)||0)/100}return{label:e,y:b,x:n,timestamp:p,id:t.id||0}}return o.bagNote5.push(a("Bagged \xa35")),o.bagPound2.push(a("Bagged \xa32")),o.bagPound1.push(a("Bagged \xa31")),o.bagPence50.push(a("Bagged 50p")),o.bagPence20.push(a("Bagged 20p")),o.bagPence10.push(a("Bagged 10p")),o.bagPence5.push(a("Bagged 5p")),o.bagPence2.push(a("Bagged 2p")),o.bagPence1.push(a("Bagged 1p")),o}),{bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]});o((e=t,{type:ft.PARSED_DATA_BAGS_SET,payload:e}))}),[d,i,s]),Object(ce.jsx)(Et.Provider,{value:{contextState:n,contextDispatch:o},children:Object(ce.jsxs)("div",{style:{background:"#fff"},children:[Object(ce.jsx)(wt,{}),Object(ce.jsx)(Nt,{}),JSON.stringify(u),Object(ce.jsxs)("ul",{children:[Object(ce.jsx)("li",{children:"Toggle individual series"}),Object(ce.jsx)("li",{children:"How to emphasis on hover"}),Object(ce.jsx)("li",{children:"Add series labels"})]})]})})},Bt=(n(256),n(257),n(258),n(259),n(260),function(){var e=Object(l.c)((function(e){return e.repositories.repositoryList})),t=Object(a.useState)(1),n=Object(ue.a)(t,2),o=n[0],r=n[1],c=new Date("2021-03-30"),i=Object(a.useState)(new Date(c.getTime()-3024e6)),s=Object(ue.a)(i,2),u=s[0],d=s[1],b=Object(a.useState)(c),p=Object(ue.a)(b,2),j=p[0],f=p[1],O=Object(a.useState)(!0),h=Object(ue.a)(O,2),m=h[0],x=h[1],v=Object(a.useState)([]),_=Object(ue.a)(v,2),y=_[0],E=_[1],S=Object(a.useState)(.2),P=Object(ue.a)(S,2),C=P[0],T=P[1],A=Object(a.useState)(null),w=Object(ue.a)(A,2),D=w[0],I=w[1],R=Object(l.c)((function(e){return e.ui.colours})),F=Object(a.useState)({bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]}),N=Object(ue.a)(F,2),L=N[0],B=N[1];Object(a.useEffect)((function(){var e="/api/v1/count?fromdate=".concat(u.getTime(),"&todate=").concat(j.getTime(),"&float=true&repository=").concat(o);console.log(e);fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),E(e.counts.reverse())}))}),[o,j,u]),Object(a.useEffect)((function(){var e=y.map((function(e){var t={bagNote5:500,bagPound2:2e3,bagPound1:2e3,bagPence50:1e3,bagPence20:1e3,bagPence10:500,bagPence5:500,bagPence2:100,bagPence1:100},n=Object(g.a)({},e.float),o=["bagNote5","bagPound2","bagPound1","bagPence50","bagPence20","bagPence10","bagPence5","bagPence2","bagPence1"].map((function(t){return{label:t,value:e.float[t]}})).sort((function(e,t){return e.value-t.value})),a=[];return o.forEach((function(e){0===a.length||e.value===a[0].value?a.push(e):function(e){for(var o=a.length,r=Math.ceil(o/2),c=1-r,i=0;c<=o-r;c++,i++){var l=a[i].label,s=a[i].value,u=m?c*C*t[l]:c;n[l]=s+u}a.length=0,a.push(e)}(e)})),Object(g.a)(Object(g.a)({},e),{},{float:n})})).reduce((function(e,t,n){var o=Object(g.a)({},e);function a(e){var o,a,r,c,i,l,s,u,d,b=0,p=t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0;switch(e){case"Bagged \xa35":b=((null===(o=t.float)||void 0===o?void 0:o.bagNote5)||0)/500;break;case"Bagged \xa32":b=((null===(a=t.float)||void 0===a?void 0:a.bagPound2)||0)/2e3;break;case"Bagged \xa31":b=((null===(r=t.float)||void 0===r?void 0:r.bagPound1)||0)/2e3;break;case"Bagged 50p":b=((null===(c=t.float)||void 0===c?void 0:c.bagPence50)||0)/1e3;break;case"Bagged 20p":b=((null===(i=t.float)||void 0===i?void 0:i.bagPence20)||0)/1e3;break;case"Bagged 10p":b=((null===(l=t.float)||void 0===l?void 0:l.bagPence10)||0)/500;break;case"Bagged 5p":b=((null===(s=t.float)||void 0===s?void 0:s.bagPence5)||0)/500;break;case"Bagged 2p":b=((null===(u=t.float)||void 0===u?void 0:u.bagPence2)||0)/100;break;case"Bagged 1p":b=((null===(d=t.float)||void 0===d?void 0:d.bagPence1)||0)/100}return{label:e,y:b,x:n,timestamp:p,id:t.id}}return o.bagNote5.push(a("Bagged \xa35")),o.bagPound2.push(a("Bagged \xa32")),o.bagPound1.push(a("Bagged \xa31")),o.bagPence50.push(a("Bagged 50p")),o.bagPence20.push(a("Bagged 20p")),o.bagPence10.push(a("Bagged 10p")),o.bagPence5.push(a("Bagged 5p")),o.bagPence2.push(a("Bagged 2p")),o.bagPence1.push(a("Bagged 1p")),o}),{bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]});B(e)}),[y,m,C]);var k=function(e){I(e)};return Object(ce.jsxs)("div",{style:{background:"#fff"},children:[Object(ce.jsxs)(oe.c,{alignItems:"center",children:[Object(ce.jsx)(Pe,{onChange:function(e){r(e.target.value)},value:o,w:"250px",children:e.map((function(e){return Object(ce.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(ce.jsx)(nt,{flex:"1",selected:u,onChange:function(e){return d(e)},name:"Date Start",locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"dd/MM/yyyy"}),Object(ce.jsx)(nt,{flex:"1",selected:j,onChange:function(e){return f(e)},name:"Date Start",locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"dd/MM/yyyy"}),Object(ce.jsxs)(ae.a,{onClick:function(){x(!m)},variant:"ui",children:["Adjustments: ",m?"ON":"OFF"]}),Object(ce.jsxs)(Ct.a,{min:.05,max:.8,step:.01,value:C,onChange:function(e){return T(e)},width:"200px",children:[Object(ce.jsx)(Ct.d,{children:Object(ce.jsx)(Ct.b,{})}),Object(ce.jsx)(Ct.c,{})]})]}),Object(ce.jsxs)(fe.g,{width:1200,height:500,yPadding:20,onMouseLeave:function(){return I(null)},style:{position:"relative"},children:[Object(ce.jsx)(fe.c,{}),Object(ce.jsx)(fe.f,{}),Object(ce.jsx)(fe.h,{}),Object(ce.jsx)(fe.d,{fill:"none",data:L.bagPound2,color:R.green}),Object(ce.jsx)(fe.d,{fill:"none",data:L.bagPound1,color:R.blue}),Object(ce.jsx)(fe.d,{fill:"none",data:L.bagPence50,color:R.orange}),Object(ce.jsx)(fe.d,{fill:"none",data:L.bagPence20,color:R.yellow}),Object(ce.jsx)(fe.d,{fill:"none",data:L.bagPence10,color:R.teal}),Object(ce.jsx)(fe.d,{fill:"none",data:L.bagPence5,color:R.black}),Object(ce.jsx)(fe.d,{fill:"none",data:L.bagPence2,color:R.gold}),Object(ce.jsx)(fe.d,{fill:"none",data:L.bagPence1,color:R.liveRed,onSeriesMouseOver:function(){return console.log(Date.now())}}),Object(ce.jsx)(fe.e,{className:"bagged-pound-two",data:L.bagPound2,onValueMouseOver:k,color:R.green}),Object(ce.jsx)(fe.e,{className:"bagged-pound-one",data:L.bagPound1,onValueMouseOver:k,color:R.blue}),Object(ce.jsx)(fe.e,{className:"bagged-pence-fifty",data:L.bagPence50,onValueMouseOver:k,color:R.orange}),Object(ce.jsx)(fe.e,{className:"bagged-pence-twenty",data:L.bagPence20,onValueMouseOver:k,color:R.yellow}),Object(ce.jsx)(fe.e,{className:"bagged-pence-ten",data:L.bagPence10,onValueMouseOver:k,color:R.teal}),Object(ce.jsx)(fe.e,{className:"bagged-pence-five",data:L.bagPence5,onValueMouseOver:k,color:R.black}),Object(ce.jsx)(fe.e,{className:"bagged-pence-two",data:L.bagPence2,onValueMouseOver:k,color:R.gold}),Object(ce.jsx)(fe.e,{className:"bagged-pence-one",data:L.bagPence1,onValueMouseOver:k,color:R.liveRed}),null!==D&&Object(ce.jsx)(fe.b,{value:D})]}),JSON.stringify(D),Object(ce.jsxs)("ul",{children:[Object(ce.jsx)("li",{children:"Toggle individual series"}),Object(ce.jsx)("li",{children:"How to emphasis on hover"}),Object(ce.jsx)("li",{children:"Why Emotion.js not working?"}),Object(ce.jsx)("li",{children:"Cancel Hint on mouseout"}),Object(ce.jsx)("li",{children:"Add Crosshair"}),Object(ce.jsx)("li",{children:"Add series labels"})]})]})}),kt=function(){var e=Object(l.b)();return Object(a.useEffect)((function(){e(function(){var e=Object(ee.a)(q.a.mark((function e(t){var n,o,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.next=4,fetch("/api/v1/partner?deleted=false",n);case 4:return o=e.sent,e.next=7,o.json();case 7:a=e.sent,t({type:j.AUTH_PARTNER_WRITE_ALL,payload:a.partners});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(ee.a)(q.a.mark((function e(t){var n,o,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.next=4,fetch("/api/v1/repository?deleted=false",n);case 4:return o=e.sent,e.next=7,o.json();case 7:a=e.sent,t({type:j.REPOSITORIES_WRITE_ALL,payload:a.repositories});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(ee.a)(q.a.mark((function e(t){var n,o,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.next=4,fetch("/api/v1/user?deleted=false",n);case 4:return o=e.sent,e.next=7,o.json();case 7:a=e.sent,console.log(a),t({type:j.AUTH_USERS_WRITE_ALL,payload:a.users});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(ce.jsx)("div",{className:"App",children:Object(ce.jsx)(K.a,{children:Object(ce.jsxs)(Q.d,{children:[Object(ce.jsx)(Q.b,{path:"/login",element:Object(ce.jsx)(ge,{})}),Object(ce.jsx)(Q.b,{path:"/home",element:Object(ce.jsx)(ce.Fragment,{children:Object(ce.jsx)(pe,{})})}),Object(ce.jsx)(Q.b,{path:"/counts",element:Object(ce.jsx)(pe,{title:"All Counts",children:Object(ce.jsx)(we,{})})}),Object(ce.jsx)(Q.b,{path:"/count/new",element:Object(ce.jsx)(pe,{title:"Add Count",children:Object(ce.jsx)(yt,{})})}),Object(ce.jsx)(Q.b,{path:"/count/:id",element:Object(ce.jsx)(pe,{title:"Edit Count",children:Object(ce.jsx)(yt,{edit:!0})})}),Object(ce.jsx)(Q.b,{path:"/repositories",element:Object(ce.jsx)(pe,{title:"All Repositories",children:Object(ce.jsx)(xe,{})})}),Object(ce.jsx)(Q.b,{path:"/repo/:id",element:Object(ce.jsx)(pe,{title:"All Repositories",children:Object(ce.jsx)(Lt,{})})}),Object(ce.jsx)(Q.b,{path:"/vistest1",element:Object(ce.jsx)(pe,{title:"Visualisation Test 1",children:Object(ce.jsx)(Bt,{})})}),Object(ce.jsx)(Q.b,{path:"/",element:Object(ce.jsx)(Q.a,{to:"/repositories"})})]})})})},Mt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,273)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),o(e),a(e),r(e),c(e)}))},Ut=Object(s.b)(Z);i.a.render(Object(ce.jsx)(r.a.StrictMode,{children:Object(ce.jsx)(l.a,{store:F,children:Object(ce.jsx)(s.a,{theme:Ut,children:Object(ce.jsx)(kt,{})})})}),document.getElementById("root")),Mt()}},[[261,1,2]]]);
//# sourceMappingURL=main.02367964.chunk.js.map