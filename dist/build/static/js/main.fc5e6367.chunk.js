(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{215:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){},310:function(e,t,n){},311:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);var o,a=n(0),r=n.n(a),i=n(39),c=n.n(i),l=n(16),s=n(359),d=n(367),u=n(64),b=n(181),p={main:{},counts:{data:[],updated:null,countsServerTotal:null,pageLength:10},ui:{flash:[{title:"Default Flash",description:"Here is a flash that will last 20 seconds",createdAt:Date.now(),duration:5e3,catt:"info",id:Date.now()+"_528491"}],coloursets:[{liveRed:"#db0032",red:"#ca6d6d",orange:"#ff883a",yellow:"#bed800",green:"#598d00",blue:"#365075",purple:"#6e70a8",black:"#333333",white:"#f3f3f3",brown:"#9f9b15",teal:"#3db8b5",tealGreen:"#03ae99",gold:"#f8b018"}],colours:{liveRed:"#db0032",red:"#ca6d6d",orange:"#ff883a",yellow:"#bed800",green:"#598d00",blue:"#365075",purple:"#6e70a8",black:"#333333",white:"#f3f3f3",brown:"#9f9b15",teal:"#3db8b5",tealGreen:"#03ae99",gold:"#f8b018"}},auth:{userList:[],userListUpdated:null,partnerList:[],partnerListUpdated:null},repositories:{repositoryList:[],repositoryListUpdated:null,repositoryServerTotal:null}},j=n(22),g=n(6);!function(e){e.COUNTS_DATA_WRITE_ALL="COUNTS_DATA_WRITE_ALL",e.COUNTS_DATA_WRITE_MULTIPLE="COUNTS_DATA_WRITE_MULTIPLE",e.COUNTS_DATA_UPDATE_SINGLE="COUNTS_DATA_UPDATE_SINGLE",e.COUNTS_DATA_WRITE_SINGLE="COUNTS_DATA_WRITE_SINGLE",e.COUNTS_SERVER_TOTAL_WRITE="COUNTS_SERVER_TOTAL_WRITE",e.UI_FLASH_WRITE_ONE="UI_FLASH_WRITE_ONE",e.UI_FLASH_REMOVE_ONE="UI_FLASH_REMOVE_ONE",e.AUTH_USERS_WRITE_ALL="AUTH_USERS_WRITE_ALL",e.AUTH_PARTNER_WRITE_ALL="AUTH_PARTNER_WRITE_ALL",e.REPOSITORIES_WRITE_ALL="REPOSITORIES_WRITE_ALL"}(o||(o={}));var h=o;function f(e,t){return Object(g.a)(Object(g.a)({},e),{},{updated:Date.now(),data:t.payload})}function m(e,t){return Object(g.a)(Object(g.a)({},e),{},{updated:Date.now(),data:[].concat(Object(j.a)(e.data),Object(j.a)(t.payload))})}function x(e,t){return Object(g.a)(Object(g.a)({},e),{},{countsServerTotal:t.payload})}var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.main,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.COUNTS_DATA_WRITE_ALL:return f(e,t);case h.COUNTS_DATA_WRITE_MULTIPLE:return m(e,t);case h.COUNTS_SERVER_TOTAL_WRITE:return x(e,t);default:return e}};function v(e,t){return Object(g.a)(Object(g.a)({},e),{},{flash:[Object(g.a)(Object(g.a)({},t.payload),{},{createdAt:Date.now(),id:Date.now()+function(){for(var e="",t=0;t<6;t++)e+=Math.floor(10*Math.random());return e}()})].concat(Object(j.a)(e.flash))})}function _(e,t){var n=e.flash.filter((function(e){return e.id!==t.payload}));return Object(g.a)(Object(g.a)({},e),{},{flash:n})}var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.ui,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.UI_FLASH_WRITE_ONE:return v(e,t);case h.UI_FLASH_REMOVE_ONE:return _(e,t);default:return e}};function C(e,t){return Object(g.a)(Object(g.a)({},e),{},{userList:t.payload,userListUpdated:Date.now()})}function E(e,t){return Object(g.a)(Object(g.a)({},e),{},{partnerList:t.payload,partnerListUpdate:Date.now()})}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.auth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.AUTH_USERS_WRITE_ALL:return C(e,t);case h.AUTH_PARTNER_WRITE_ALL:return E(e,t);default:return e}};function P(e,t){return Object(g.a)(Object(g.a)({},e),{},{repositoryList:t.payload,repositoryListUpdated:Date.now()})}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.repositories,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.REPOSITORIES_WRITE_ALL:return P(e,t);default:return e}},S=Object(u.c)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.main;return e},counts:O,ui:y,auth:w,repositories:T}),D=[b.a],A=[u.a.apply(void 0,D)];window.hasOwnProperty("__REDUX_DEVTOOLS_EXTENSION__")&&A.push(window.__REDUX_DEVTOOLS_EXTENSION__());var F,L=u.d.apply(void 0,A),I=Object(u.e)(S,p,L),N={primary:"#598d00",highlight:"#BED800",bgDark:"#004A32",shade:"#2F6B38",bgLight:"#FFFFFF"},R={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"},waitrose:Object(g.a)({},N),theme_light:{text:{clickable:N.bgDark,contrastGreen:"#FFFFFF",darker:"#515151",standard:"#717171",light:"#9a9a9a",lighter:"#C4C4C4",invisable:"#DADADB",menuActive:"#FFFFFF",title:N.bgDark,button:"#F3F3F3",buttonActive:N.primary},background:{primary:"#EAEAEA",secondary:"#7EC507",button:"#FFFFFF"},ui:{line:"#CACACA",container:"#CACACA",danger:"#CA6D6D",dangerLight:"#E75858",dangerDark:"#AF1C1C",divider:"#ECF0F1",bgInsetLight:"#F8F8F8",bgInsetShaded:"#E2E2E2",bgInsetDark:"#DEDEDE"},info:{unfinished:"#ca6d6d",partial:"#bed800",complete:"#004A32",unverified:"#3db8b5"}}},B={body:"lato, Lato-Regular, lato-regular, 'Lato Regular', roboto, system-ui, sans-serif",heading:"lato, Lato-Regular, roboto, system-ui, sans-serif, Georgia, serif",mono:"lato, Lato-Regular, roboto, system-ui, sans-serif, Menlo, monospace"},k={xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"},U={hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},M={normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},G={tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},W={px:"1px",0:"0",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},z=Object(g.a)(Object(g.a)({},W),{},{max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}}),H={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},V={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},Y={global:{body:{color:"theme_light.text.standard",fontFamily:["lato","roboto","sans-serif"]},button:{h:"auto"}}},J={h:"auto !important",fontWeight:"normal",lineHeight:"normal",color:"theme_light.text.contrastGreen",border:"2px solid",borderColor:"waitrose.primary",bgColor:"waitrose.primary",p:"8px 16px",margin:"0 4px",_hover:{borderColor:"#7EC507",bgColor:"#7EC507"},_active:{borderColor:"waitrose.bgDark",bgColor:"waitrose.bgDark"}},X={Heading:{baseStyle:{color:"theme_light.text.standard",padding:".35rem 0"},sizes:{"2xl":{color:"theme_light.text.title"}},variants:{primary:{color:"theme_light.text.title"}},defaultProps:{}},Button:{baseStyle:Object(g.a)({},J),sizes:{sm:{h:"auto !important",fontSize:"12px",p:"4px 4px",padding:"4px 4px",borderRadius:".15rem"},md:{fontSize:"16px",p:"8px 16px"},lg:{fontSize:"20px",p:"12px 20px"}},variants:{standard:J,link:{border:"none",background:"none",textDecoration:"none",cursor:"pointer",color:"waitrose.primary",_hover:{textDecoration:"none",bg:"none",color:"theme_light.text.clickable"},_active:{color:"#7EC507",bg:"none",textDecoration:"none"}},outline:{color:"waitrose.primary",border:"2px solid",borderColor:"waitrose.primary",bgColor:"rgba(0,0,0,0)",fontWeight:"normal",padding:"16px 24px",margin:"0 4px",_hover:{borderColor:"waitrose.primary",bgColor:"waitrose.primary",background:"waitrose.primary",color:"theme_light.text.contrastGreen"},_active:{borderColor:"waitrose.bgDark",bgColor:"waitrose.bgDark",background:"waitrose.bgDark",color:"#FFFFFF"}},solid:{bg:"green.500",color:"white"},ui:{border:"2px solid",marginY:"2px",borderColor:"#EAEAEA",h:"auto",bgColor:"#EAEAEA",color:"theme_light.text.standard",_hover:{borderColor:"#D3D3D3",bgColor:"#D3D3D3",color:"theme_light.text.darker"},_active:{borderColor:"#C4C4C4",bgColor:"#C4C4C4"},_focus:{boxShadow:"0 0 0 2px #5EAFFB",borderColor:"#5EAFFB"}},transparent:{bgColor:"none",borderColor:"waitrose.primary",color:"waitrose.primary",_hover:{color:"white",borderColor:"waitrose.primary",bgColor:"waitrose.primary"},_active:{color:"white",bgColor:"waitrose.bgDark",borderColor:"waitrose.bgDark"}},primary:{borderRadius:"20px"},warning:{},danger:{bgColor:"theme_light.ui.danger",borderColor:"theme_light.ui.danger",color:"#ffffff",_hover:{bgColor:"theme_light.ui.dangerLight",borderColor:"theme_light.ui.dangerLight"},_active:{bgColor:"theme_light.ui.dangerDark",borderColor:"theme_light.ui.dangerDark"}},dangerOutline:{bg:"none",border:"2px solid",borderColor:"theme_light.ui.danger",color:"theme_light.ui.danger",_hover:{bgColor:"theme_light.ui.danger",borderColor:"theme_light.ui.danger",color:"#ffffff"},_active:{bgColor:"theme_light.ui.dangerDark",borderColor:"theme_light.ui.dangerDark"}},dangerLink:{bg:"none",border:"2px solid",borderColor:"rgba(0,0,0,0)",fontWeight:"bold",color:"theme_light.ui.danger",_hover:{bg:"none",borderColor:"rgba(0,0,0,0)",color:"theme_light.ui.dangerLight"},_active:{bg:"none",borderColor:"rgba(0,0,0,0)",color:"theme_light.ui.dangerDark"}}},defaultProps:{size:"md",variant:"standard",h:"auto"}},Text:{baseStyle:{color:"theme_light.text.standard",padding:".2rem 0"},sizes:{},variants:{danger:{color:"theme_light.ui.danger"},faded:{color:"theme_light.text.invisable"}},defaultProps:{}},FormLabel:{baseStyle:{color:"theme_light.text.standard"},sizes:{},variants:{},defaultProps:{}},Input:{baseStyle:{color:"red",m:"20px"}},Textarea:{baseStyle:{bgColor:"#f8f8f8"}},Select:{baseStyle:{color:"red",borderRadius:"0",bg:"blue"},variants:{outline:{borderRadius:"0",color:"red"}}}},K=(n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,n.p,{colors:R,fonts:B,fontSizes:k,fontWeights:U,lineHeights:M,letterSpacings:G,space:W,sizes:z,radii:H,zIndices:V,styles:Y,components:X}),Z=(n(215),n(94)),$=n(20),q=n(31),Q=n.n(q),ee=n(59),te=function(e,t,n){return function(){var o=Object(ee.a)(Q.a.mark((function o(a){var r,i,c;return Q.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r="/api/v1/count?deleted=false&page=".concat(e||0,"&pagelength=").concat(t||10),n&&(r+="&repository=".concat(n)),console.log(r),o.next=5,fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}});case 5:return i=o.sent,o.next=8,i.json();case 8:c=o.sent,console.log(c),a({type:h.COUNTS_DATA_WRITE_MULTIPLE,payload:c.counts});case 11:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},ne=function(e,t,n,o){return{type:h.UI_FLASH_WRITE_ONE,payload:{title:e,description:t,catt:n,duration:o||null}}},oe=n(340),ae=n(330),re=n(192),ie=n(333),ce=n(334),le=n(335),se=n(332),de=n(2),ue=function(e){var t=e.title,n=e.navWidth;return Object(de.jsxs)(ae.a,{direction:"row",children:[Object(de.jsxs)(re.a,{m:"0",borderRadius:"0",width:n||"auto",transition:"background 250ms, border 250ms",children:[Object(de.jsx)(se.a,{}),"Exit"]}),Object(de.jsxs)(ae.a,{direction:"column",flex:"1",children:[Object(de.jsx)(ie.a,{as:"h1",size:"xl",variant:"primary",alignSelf:"flex-start",p:"10px 40px",children:t}),Object(de.jsx)(ce.a,{padding:"0 40px",children:Object(de.jsx)(le.a,{orientation:"horizontal",height:"1px",bg:"theme_light.text.darker"})})]})]})},be=n(336),pe=n(337),je=function(e){var t=Object($.h)().pathname===e.to,n="".concat("5px",t?" solid #fff":" solid rgba(0,0,0,0)"),o=e.primary?"bold":"normal";return Object(de.jsx)(be.a,{m:"20px 0",p:"4px 16px",borderLeft:n,fontWeight:o,children:Object(de.jsx)(pe.a,Object(g.a)(Object(g.a)({},e),{},{href:"#".concat(e.to),color:"waitrose.bgLight",fontSize:"1.2em"}))})},ge=function(){return Object(de.jsx)(ae.a,{direction:"column",bgColor:"waitrose.primary",h:"100%",textAlign:"left",children:Object(de.jsx)("nav",{children:Object(de.jsxs)(be.b,{styleType:"none",m:"0px",children:[Object(de.jsx)(le.a,{}),Object(de.jsx)(je,{to:"/repositories",primary:"true",current:"true",children:"Repositories"}),Object(de.jsx)(le.a,{}),Object(de.jsx)(je,{to:"/counts",primary:"true",children:"Counts"}),Object(de.jsx)(je,{to:"/count/new",children:"New Count"}),Object(de.jsx)(je,{to:"/incomplete-counts",children:"Incomplete Counts"}),Object(de.jsx)(le.a,{}),Object(de.jsx)(je,{to:"/users",primary:"true",children:"Users"}),Object(de.jsx)(le.a,{})]})})})},he=n(4),fe=n(338),me=n(339),xe=function(e){var t=e.title,n=e.description,o=e.catt,r=e.duration,i=e.id,c=Object(l.b)(),s=Object(a.useState)(null),d=Object(he.a)(s,2),u=d[0],b=d[1],p=Object(a.useState)("translate(-100%, -50%)"),j=Object(he.a)(p,2),g=j[0],f=j[1];function m(){f("translate(-120%, 0%)"),setTimeout((function(){c(function(e){return{type:h.UI_FLASH_REMOVE_ONE,payload:e}}(i))}),1e3)}Object(a.useEffect)((function(){f("translate(0%, 0%)"),r&&b(setTimeout(m,r))}),[]);var x="18px";return Object(de.jsxs)(ce.a,{bgColor:"waitrose.bgLight",p:"0px 0px 0px 20px",my:"5px",borderLeft:"15px solid",display:"flex",alignItems:"stretch",justifyContent:"space-between",borderColor:function(){switch(o){case"unverified":case"info":return"theme_light.info.unverified";case"complete":return"theme_light.info.complete";case"partial":return"theme_light.info.partial";case"danger":case"incomplete":return"theme_light.info.unfinished";default:return"theme_light.text.standard"}}(),boxShadow:"5px 5px 10px rgba(0,0,0,.3)",transform:g,transition:"transform .2s linear",onMouseOver:function(){b(clearTimeout(u))},w:"100%",_hover:{bgColor:"#f2f2f2"},children:[Object(de.jsxs)(ae.a,{alignItems:"center",children:[Object(de.jsx)(ie.a,{fontSize:"1.2em",py:x,children:t}),Object(de.jsx)(fe.a,{fontSize:"1.1em",px:"1em",py:x,children:n})]}),Object(de.jsx)(re.a,{h:"1mm00%",m:"0",borderRadius:"0",bgColor:"waitrose.bgLight",color:"theme_light.text.standard",border:"none",_hover:{bgColor:"theme_light.text.invisable"},_active:{bgColor:"theme_light.text.light"},onClick:m,children:Object(de.jsx)(me.a,{})})]})},Oe=function(){var e=Object(l.c)((function(e){return e.ui})).flash;return Object(de.jsx)(ae.a,{position:"fixed",bottom:"10px",left:"10px",w:"30vw",direction:"column",children:e.map((function(e,t){return Object(de.jsx)(xe,Object(g.a)({},e),t)}))})},ve=function(e){var t=e.children,n=e.title,o="15vw";return Object(de.jsxs)(oe.a,{className:"Page-Dashboard",templateColumns:"".concat(o," 1fr"),templateRows:"auto 1fr",h:"100vh",bgColor:"theme_light.background.primary",children:[Object(de.jsx)(oe.b,{colStart:1,colEnd:-1,children:Object(de.jsx)(ue,{title:n,navWidth:o})}),Object(de.jsx)(oe.b,{rowStart:2,rowEnd:-1,children:Object(de.jsx)(ge,{})}),Object(de.jsx)(oe.b,{w:"100%",p:"2em 40px",textAlign:"left",bg:"theme_light.background.primary",colStart:2,colEnd:2,rowStart:2,rowEnd:2,bgColor:"theme_light.background.primary",children:t}),Object(de.jsx)(Oe,{})]})},_e=function(){return Object(de.jsx)(de.Fragment,{children:"Login Page"})},ye=n(26),Ce=n(21),Ee={bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]},we=["bagNote5","bagPound2","bagPound1","bagPence50","bagPence20","bagPence10","bagPence5","bagPence2","bagPence1"],Pe=function(e){var t=e.width,n=e.height,o=e.repository,r=Object(a.useState)([]),i=Object(he.a)(r,2),c=i[0],s=i[1],d=Object(a.useState)(Ee),u=Object(he.a)(d,2),b=u[0],p=u[1],h=Object(a.useState)(null),f=Object(he.a)(h,2),m=f[0],x=f[1],O=Object(a.useState)(Array.from({length:10},(function(e,t){return t}))),v=Object(he.a)(O,2),_=v[0],y=v[1],C=Object(l.c)((function(e){return e.ui.colours})),E={bagNote5:C.red,bagPound2:C.green,bagPound1:C.blue,bagPence50:C.orange,bagPence20:C.yellow,bagPence10:C.teal,bagPence5:C.black,bagPence2:C.gold,bagPence1:C.liveRed};Object(a.useEffect)((function(){var e="/api/v1/count?repository=".concat(o.id,"&float=1&limit=4");fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.status?s(e.counts):console.error(e.errorMessage)})).catch((function(e){return console.error(e)}))}),[o]),Object(a.useEffect)((function(){var e=c.map((function(e){var t=Object(g.a)({},e.float),n=we.map((function(t){return{label:t,value:e.float&&e.float[t]?e.float[t]:0}})).sort((function(e,t){return e.value-t.value})),o=[];return n.forEach((function(e){0===o.length||e.value===o[0].value?o.push(e):function(e){for(var n=o.length,a=Math.ceil(n/2),r=1-a,i=0;r<=n-a;r++,i++){var c=o[i].label,l=o[i].value,s=r;t[c]=l+s}o.length=0,o.push(e)}(e)})),Object(g.a)(Object(g.a)({},e),{},{float:t})})),t=function(e,t,n,o,a){return{label:e,y:t,x:n,timestamp:o,id:a}},n=e.reduce((function(e,n,o){var a,r,i,c,l,s,d,u,b,p=Object(g.a)({},e);return p.bagNote5.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(a=n.float)||void 0===a?void 0:a.bagNote5)||0)/500,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPound2.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(r=n.float)||void 0===r?void 0:r.bagPound2)||0)/2e3,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPound1.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(i=n.float)||void 0===i?void 0:i.bagPound1)||0)/2e3,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence50.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(c=n.float)||void 0===c?void 0:c.bagPence50)||0)/1e3,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence20.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(l=n.float)||void 0===l?void 0:l.bagPence20)||0)/1e3,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence10.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(s=n.float)||void 0===s?void 0:s.bagPence10)||0)/500,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence5.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(d=n.float)||void 0===d?void 0:d.bagPence5)||0)/500,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence2.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(u=n.float)||void 0===u?void 0:u.bagPence2)||0)/100,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p.bagPence1.push(t(new Date(n.timestamp).toLocaleString("en-GB"),((null===(b=n.float)||void 0===b?void 0:b.bagPence1)||0)/100,o,n.timestamp?new Date(n.timestamp).toLocaleString("en-GB"):void 0,n.id)),p}),{bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]}),o=[],a=[];Object.values(n).forEach((function(e){var t=e.map((function(e){return e.y}));o.push(Math.max.apply(Math,Object(j.a)(t))),a.push(Math.min.apply(Math,Object(j.a)(t)))}));var r=Math.max.apply(Math,o)+1,i=Math.min.apply(Math,a),l=Array.from({length:r-i},(function(e,t){return t+i}));y(l),p(n)}),[c]);var w=function(e){x(e)};return c.length?Object(ye.c)("div",{style:{position:"relative"}},Object(ye.c)(Ce.g,{width:t,height:n,background:"#183625",onMouseLeave:function(){x(null)}},Object(ye.c)(Ce.f,null),Object(ye.c)(Ce.h,{tickValues:_}),Object(ye.c)(Ce.c,null),we.map((function(e){return Object(ye.c)(Ce.d,{key:e,data:b[e],color:E[e]})})),we.map((function(e){return Object(ye.c)(Ce.e,{key:e,data:b[e],onNearestX:w,color:E[e]})})),null!==m&&void 0!==m?Object(ye.c)(Ce.a,{values:[m]},Object(ye.c)("div",{css:Object(ye.b)({textAlign:"left",fontSize:"12px",padding:"6px",borderRadius:"5px",pointerEvents:"none",boxShadow:"5px 5px 5px rgba(0,0,0,.3)",background:"#3A3A48",margin:"5px",boxSizing:"border-box",transform:"translateY(-100%)",display:"flex",flexDirection:"column"})},Object(ye.c)("p",null,m.label))):void 0),Object(ye.c)("div",null,JSON.stringify(m))):Object(ye.c)("div",{style:{position:"relative"}},Object(ye.c)(ae.a,{height:n,alignItems:"center",justifyContent:"center"},Object(ye.c)(ie.a,{as:"h4"},"No Data")))},Te=function(){var e=Object(l.c)((function(e){return e.repositories.repositoryList})).filter((function(e){return!e.deleted&&!e.deactivated})),t=[{w:600,h:300}];return Object(de.jsx)(oe.a,{gridTemplateColumns:"1fr 1fr",gridAutoRows:"auto",children:e.map((function(e){return Object(de.jsx)(oe.b,{p:"40px 20px",children:Object(de.jsxs)(ce.a,{w:"100%",bgColor:"#fff",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",children:[Object(de.jsx)(ie.a,{as:"h2",children:e.name}),Object(de.jsx)(Pe,{width:t[0].w,height:t[0].h,repository:e})]})},e.id)}))})},Se=n(364),De=n(341),Ae=function(){return Object(de.jsx)(ce.a,{position:"fixed",bottom:"0",right:"0",children:Object(de.jsxs)(re.a,{as:pe.a,href:"/#/count/new",h:50,borderRadius:25,fontSize:"18px",px:"30px",margin:"1rem 2rem",_hover:{textDecoration:"none",borderColor:"#7EC507",bgColor:"#7EC507"},children:["New Count",Object(de.jsx)(De.a,{ml:"20px"})]})})},Fe=n(363),Le=function(e){var t,n=e.listCount,o=e.repositories,a=new Date(n.timestamp),r="40px",i=o.find((function(e){return n.repositoryId===e.id}));return Object(de.jsxs)(ae.a,{bgColor:"#ffffff",alignItems:"center",justifyContent:"space-between",m:"4px 0",borderLeft:"10px solid",borderLeftColor:(t=n.completionStatus,{complete:"theme_light.info.complete",partial:"theme_light.info.partial",incomplete:"theme_light.info.unfinished",unverified:"theme_light.info.unverified"}[t]),transition:".1s linear",title:function(e){return{complete:"This count is a fully completed count.",partial:"This count is partially complete meaning at least the bagged coin data is present.",incomplete:"This count is missing data and will not show on any graphs or analytics.",unverified:"This count is unverified, a duty partner must authorise it."}[e]}(n.completionStatus),_hover:{bgColor:"#DADADB"},children:[Object(de.jsx)(pe.a,{href:"#/count/".concat(n.id),flex:"1",py:"10px",pl:r,_hover:{textDecoration:"none"},children:Object(de.jsxs)(ae.a,{alignItems:"center",justifyContent:"space-between",children:[Object(de.jsx)(fe.a,{children:i?i.name:""}),Object(de.jsx)(fe.a,{children:["Mon","Tue","Wed","Thur","Fri","Sat","Sun"][a.getDay()]}),Object(de.jsx)(fe.a,{children:a.toLocaleDateString("en-GB")}),Object(de.jsx)(fe.a,{children:a.toLocaleTimeString("en-GB")})]})}),Object(de.jsx)(ae.a,{alignItems:"center",justifyContent:"center",px:r,children:Object(de.jsx)(Fe.a,{})})]},n.id)},Ie=n(342),Ne=function(e){return Object(de.jsx)(Ie.a,Object(g.a)({color:"theme_light.text.light",borderRadius:"0",border:"2px solid",borderColor:"theme_light.text.lighter",m:"10px 0",_hover:{color:"theme_light.text.darker",borderColor:"theme_light.text.light"},_focus:{boxShadow:"0 0 0 2px #5EAFFB",borderColor:"theme_light.text.standard"}},e))},Re=function(e){var t=e.selectedRepo,n=e.changeSeletedRepo,o=e.repositories;return Object(de.jsxs)(Ne,{w:"50%",value:t,onChange:function(e){return n(e.target.value)},children:[Object(de.jsx)("option",{value:"all",children:"All Repositories"}),o.map((function(e){return Object(de.jsx)("option",{value:e.id,children:e.name},e.id)}))]})},Be=n(343),ke=n(344),Ue=function(e){var t=e.page,n=(e.pageLength,e.setPage);return Object(de.jsxs)(ae.a,{justifyContent:"center",m:"50px 0",position:"sticky",bottom:"10px",children:[Object(de.jsxs)(re.a,{variant:"ui",onClick:function(e){0!==t&&n(t-1)},children:[Object(de.jsx)(se.a,{}),"Previous"]}),Object(de.jsx)(Be.a,{value:t,onChange:function(e){return console.log(e)},w:"100px",textAlign:"center"}),Object(de.jsxs)(re.a,{variant:"ui",onClick:function(e){return n(t+1)},children:["Next",Object(de.jsx)(ke.a,{})]})]})},Me=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.repositories.repositoryList})),n=Object(a.useState)("all"),o=Object(he.a)(n,2),r=o[0],i=o[1],c=Object(a.useState)(0),s=Object(he.a)(c,2),d=s[0],u=s[1],b=Object(l.c)((function(e){return e.counts})),p=b.data,j=b.updated,g=b.pageLength;return Object(a.useEffect)((function(){e(function(){var e=Object(ee.a)(Q.a.mark((function e(t){var n,o;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch("/api/v1/count/total",{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:o=e.sent,t({type:h.COUNTS_SERVER_TOTAL_WRITE,payload:o.total["count(*)"]});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e,d]),Object(a.useEffect)((function(){(d+1)*g>p.length&&p.length%g===0&&e(te(d,g,r))}),[e,d]),j?Object(de.jsxs)("div",{children:[Object(de.jsx)(Re,{selectedRepo:r,changeSeletedRepo:function(t){i(t),u(0),e(te(d,g))},repositories:t}),Object(de.jsx)(ae.a,{direction:"column",children:p.filter((function(e){return e.repositoryId===Number(r)||"all"===r})).slice(d*g,(d+1)*g).map((function(e,n){return Object(de.jsx)(Le,{listCount:e,repositories:t},n)}))}),Object(de.jsx)(Ue,{page:d,setPage:u,pageLength:g}),Object(de.jsx)(Ae,{})]}):Object(de.jsxs)(ae.a,{direction:"column",children:[Object(de.jsx)(Se.a,{height:"40px",width:"50%",my:"10px"}),Array.from({length:3}).map((function(e,t){return Object(de.jsx)(Se.a,{height:"30px",my:"4px"},t)}))]})},Ge=n(346),We=n(12),ze=n(345),He=n(362),Ve=r.a.createContext({testing:"testing one two"}),Ye=["401","403","lotto"];!function(e){e.WRITE_ALL="WRITE_ALL",e.SET_READY="SET_READY",e.UPDATE_REPO="UPDATE_REPO",e.UPDATE_COUTNER="UPDATE_COUTNER",e.UPDATE_SUPERVISOR="UPDATE_SUPERVISOR",e.UPDATE_TIME="UPDATE_TIME",e.UPDATE_BAG="UPDATE_BAG",e.UPDATE_LOOSE="UPDATE_LOOSE",e.UPDATE_NOTES="UPDATE_NOTES"}(F||(F={}));var Je=function(e,t){return""===e||void 0===e||null===e?"":e},Xe=function(e){if(void 0===e||null===e||!e)return"";var t="",n=null===e.shortUid;return console.log(e),n?t+="".concat(e.firstName," ").concat(e.lastName):(t+="".concat(e.tillNumber," "),e.firstName&&""!==e.firstName&&(e.lastName&&""!==e.lastName?(t+=e.firstName.substring(0,1).toUpperCase(),t+=e.lastName.substring(0,1).toUpperCase()):t+=e.firstName)),t},Ke=function(e){var t=e.label,n=e.step,o=e.denomination,r=Object(a.useContext)(Ve),i=r.state,c=r.dispatch,l=i.data.bagged[o],s=Object(a.useState)(null),d=Object(he.a)(s,2),u=d[0],b=d[1],p=Object(a.useState)(null),j=Object(he.a)(p,2),g=j[0],h=j[1],f=Object(ze.a)("(max-width: 760px)");Object(a.useEffect)((function(){h(l)}),[l]);var m,x=f?"6fr":"4fr";return Object(de.jsx)(oe.b,{p:f?"8px 10px":"8px 20px",children:Object(de.jsxs)(oe.a,{alignItems:"center",justifyContent:"space-around",title:u||"",width:"100%",templateColumns:"".concat("3fr"," ").concat(x," ").concat("3fr"),justifyItems:"center",children:[Object(de.jsxs)(Ge.a,{margin:"0",children:[t," "]}),Object(de.jsx)(He.a,{value:Je("number"===typeof g?g/n:g),children:Object(de.jsx)(He.b,{value:Je("number"===typeof g?g/n:g),onKeyDown:function(e){var t=e.keyCode;if(!(t<38||t>40)){if(38===t){var a=Number(g)+n;if(a<0)return;c({type:F.UPDATE_BAG,payload:Object(We.a)({},o,a)})}if(40===t){var r=Number(g)-n;if(r<0)return;c({type:F.UPDATE_BAG,payload:Object(We.a)({},o,r)})}}},onChange:function(e){return function(e){var t=Number(e)*n,a=""===e||void 0===e||null===e?null:t;if(t%1||isNaN(t))b("Invalid input, please check");else{b(null);var r=Object(We.a)({},o,a);c({type:F.UPDATE_BAG,payload:r})}}(e.target.value)},bgColor:"#f8f8f8",borderColor:"rgba(0,0,0,0)",borderRadius:"none",borderBottom:"2px solid",borderBottomColor:"theme_light.text.lighter",boxShadow:u?"0 0 0 3px #E75858":"none",title:"The number of ".concat(t," bags. Each bag is \xa3").concat((n/100).toFixed(2)),className:"tab_jump bag_".concat(o)})}),Object(de.jsx)(fe.a,{p:"0",color:"theme_light.text.invisable",children:(m="number"===typeof g?g:0,"\xa3".concat(m/100))})]})})},Ze=function(e){var t=e.value,n=e.title;return Object(de.jsx)(ce.a,{p:"20px",children:Object(de.jsxs)(fe.a,{fontSize:"18px",color:"theme_light.text.darker",textAlign:"right",title:n||"",children:["Total: ",(t/100).toFixed(2)]})})},$e=function(){var e=Object(a.useContext)(Ve).state.data.bagged.total;return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(le.a,{}),Object(de.jsx)(Ge.a,{marginTop:"10px",children:"Bagged Coin"}),Object(de.jsxs)(oe.a,{templateColumns:"1fr 1fr",autoRows:"1fr",children:[Object(de.jsx)(Ke,{label:"\xa32",denomination:"pound_two",step:2e3,display:"pound"}),Object(de.jsx)(Ke,{label:"\xa31",denomination:"pound_one",step:2e3,display:"pound"}),Object(de.jsx)(Ke,{label:"50p",denomination:"pence_fifty",step:1e3,display:"pence"}),Object(de.jsx)(Ke,{label:"20p",denomination:"pence_twenty",step:1e3,display:"pence"}),Object(de.jsx)(Ke,{label:"10p",denomination:"pence_ten",step:500,display:"pence"}),Object(de.jsx)(Ke,{label:"5p",denomination:"pence_five",step:500,display:"pence"}),Object(de.jsx)(Ke,{label:"2p",denomination:"pence_two",step:100,display:"pence"}),Object(de.jsx)(Ke,{label:"1p",denomination:"pence_one",step:100,display:"pence"}),Object(de.jsx)(ce.a,{}),Object(de.jsx)(Ke,{label:"\xa35 Note",denomination:"note_five",step:500,display:"pound"})]}),Object(de.jsx)(Ze,{value:e,title:"total bagged value (\xa3)"})]})},qe=n(350),Qe=function(e){return Object(de.jsx)(Be.a,Object(g.a)({color:"theme_light.text.light",borderRadius:"0",bgColor:"#f8f8f8",borderTop:"none",borderLeft:"none",borderRight:"none",borderBottom:"2px solid",borderColor:"theme_light.text.lighter",m:"10px 0",_hover:{borderColor:"theme_light.text.standard"},_focus:{color:"theme_light.text.darker",boxShadow:"0 0 0 2px #5EAFFB"}},e))},et=n(107),tt=function(e){var t=e.formatReadableName,n=e.handleDropDownSelect,o=e.showMenu,a=e.filteredList,r=Object(l.c)((function(e){return e.auth})).userListUpdated;return Object(de.jsx)(ae.a,{flexDirection:"column",position:"relative",zIndex:"1",children:r&&o&&0!==a.length&&Object(de.jsx)(be.b,{position:"absolute",m:"0px",top:"0px",background:"#fff",w:"100%",boxShadow:"0px 5px 10px rgba(0,0,0,.1)",borderRadius:"5px",py:"4px",children:a.map((function(e,o){return Object(de.jsx)(be.a,{listStyleType:"none",children:Object(de.jsxs)(re.a,{p:"4px",variant:"ui",mx:"0px",my:"0px",borderRadius:"0px",width:"100%",justifyContent:"flex-start",bgColor:0===o?"#cde6fe":"#fff",border:"none",onClick:function(){return n(e)},display:"flex",justifyItems:"space-between",children:[Object(de.jsx)("span",{children:t(e)}),Object(de.jsx)("span",{children:0===o?Object(de.jsx)(et.b,{}):""})]},e.id)},e.id)}))})})},nt=function(e){var t=e.label,n=e.dispatchType,o=e.stateAssignment,r=Object(a.useContext)(Ve),i=r.state,c=r.dispatch,s=Object(l.c)((function(e){return e.auth.partnerList})),d=Object(a.useState)(!1),u=Object(he.a)(d,2),b=u[0],p=u[1],j=Object(a.useState)(s),g=Object(he.a)(j,2),h=g[0],f=g[1];return Object(a.useEffect)((function(){var e=s.filter((function(e){if(!/\w+/.test(i[o]))return!0;var t=[e.firstName,e.middleNames,e.lastName],n="".concat(e.id).concat(e.shortUid).concat(t.join("")),a=!1;if(new RegExp(i[o],"gi").test(n)&&(a=!0),e.firstName&&e.lastName){var r=e.firstName.substring(0,1),c=e.lastName.substring(0,1);new RegExp("".concat(r).concat(c),"gi").test(i[o])&&(a=!0)}return a}));f(e)}),[i[o]]),Object(de.jsxs)(qe.a,{display:"flex",flexDirection:"column",onBlur:function(){setTimeout((function(){p(!1)}),500)},onFocus:function(){p(!0)},onKeyDown:function(e){var t;if(13===e.keyCode&&!(h.length<1)){var a=h[0];c({type:n,payload:(t={},Object(We.a)(t,o,Xe(a)),Object(We.a)(t,"".concat(o,"Id"),a.id),t)}),p(!1)}},children:[Object(de.jsx)(Ge.a,{children:t}),Object(de.jsxs)(ce.a,{px:"1rem",position:"relative",children:[Object(de.jsx)(Qe,{value:i[o],onChange:function(e){return c({type:n,payload:Object(We.a)({},o,e.target.value)})},marginBottom:"0px"}),Object(de.jsx)(tt,{formatReadableName:Xe,handleDropDownSelect:function(e){var t;console.log("Clicked ",e.shortUid),c({type:n,payload:(t={},Object(We.a)(t,o,Xe(e)),Object(We.a)(t,"".concat(o,"Id"),e.id),t)}),p(!1)},showMenu:b,filteredList:h})]})]})},ot=function(e){var t=e.label,n=e.denomination,o=e.step,r=Object(a.useContext)(Ve),i=r.state,c=r.dispatch,l=i.data.loose[n],s=Object(a.useState)(null),d=Object(he.a)(s,2),u=d[0],b=d[1],p=Object(a.useState)(void 0),j=Object(he.a)(p,2),g=j[0],h=j[1],f=Object(ze.a)("(max-width: 760px)");Object(a.useEffect)((function(){h("number"===typeof l?(l/100).toFixed(2):void 0)}),[l]);var m=f?"6fr":"4fr";return Object(de.jsx)(oe.b,{p:f?"8px 10px":"8px 20px",children:Object(de.jsxs)(oe.a,{alignItems:"center",justifyContent:"space-around",title:u||"",width:"100%",templateColumns:"".concat("3fr"," ").concat(m," ").concat("3fr"),justifyItems:"center",children:[Object(de.jsx)(Ge.a,{margin:"0",children:t}),Object(de.jsx)(He.a,{value:null===g?void 0:g,onBlur:function(e){var t=e.target.value,a=Math.floor(100*Number(t));if(a!==l){var r=""===t||null===t||void 0===t?null:a,i=a%1,s=isNaN(a),d=a%o;if(/\.$/gi.test(t))b("Error [LooseCountInput] at isPartialInput test: value contains a trailling full stop.");else if(i)b("Error [LooseCoinInput] at minimumValueTest: value entered is bellow the value of this denomination: value: ".concat(t,", denomination: ").concat(o/100));else if(s)b("Error [LooseCoinInput] at nanTest: value entered is not a number: value: ".concat(t));else if(d)b("Error [LooseCoinInput] at outOfStepTest: value entered is incompatible with the denomination's min value: value: ".concat(t,", denomination: ").concat(o/100));else{var u=Object(We.a)({},n,r);console.log("dispatching",u),b(null),c({type:F.UPDATE_LOOSE,payload:u})}}},children:Object(de.jsx)(He.b,{onChange:function(e){return t=e.target.value,console.log(typeof t,t),void h(t);var t},value:null===g?void 0:g,bgColor:"#f8f8f8",borderColor:"rgba(0,0,0,0)",borderRadius:"none",borderBottom:"2px solid",borderBottomColor:"theme_light.text.lighter",boxShadow:u?"0 0 0 2px #E75858":"none",title:"Amount of ".concat(t.toLowerCase()," in format \xa30.00").concat(u?"\n"+u:""),className:"tab_jump"})})]})})},at=function(){var e=Object(a.useContext)(Ve).state.data.loose.total;return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(le.a,{}),Object(de.jsx)(Ge.a,{marginTop:"10px",children:"Loose Coin"}),Object(de.jsxs)(oe.a,{templateColumns:"1fr 1fr",autoRows:"auto",children:[Object(de.jsx)(ot,{label:"\xa32",display:"pound",denomination:"pound_two",step:200}),Object(de.jsx)(ot,{label:"\xa31",display:"pound",denomination:"pound_one",step:100}),Object(de.jsx)(ot,{label:"50p",display:"pence",denomination:"pence_fifty",step:50}),Object(de.jsx)(ot,{label:"20p",display:"pence",denomination:"pence_twenty",step:20}),Object(de.jsx)(ot,{label:"10p",display:"pence",denomination:"pence_ten",step:10}),Object(de.jsx)(ot,{label:"5p",display:"pence",denomination:"pence_five",step:5}),Object(de.jsx)(ot,{label:"2p",display:"pence",denomination:"pence_two",step:2}),Object(de.jsx)(ot,{label:"1p",display:"pence",denomination:"pence_one",step:1}),Object(de.jsx)(ce.a,{}),Object(de.jsx)(ot,{label:"Any Other Value",display:"pound",denomination:"other",step:1})]}),Object(de.jsx)(Ze,{value:e,title:"total loose coin (\xa3)"})]})},rt=function(e){var t=e.denomination,n=e.step,o=e.label,r=Object(a.useContext)(Ve),i=r.state,c=r.dispatch,l=i.data.notes[t],s=Object(a.useState)(null),d=Object(he.a)(s,2),u=d[0],b=d[1],p=Object(a.useState)(null),j=Object(he.a)(p,2),g=j[0],h=j[1];Object(a.useEffect)((function(){h(null===l?"":l/n)}),[l,n]);return Object(de.jsx)(He.a,{px:"2em",value:null===g?void 0:g,children:Object(de.jsx)(He.b,{onChange:function(e){return function(e){var o=Number(e);h(""===e||void 0===e||null===e?"":o);var a=o*n,r=isNaN(a),i=a<0,l=a>0&&a%n;if(r)b("Error in [handleNumberChange] at nanCheck: value is not a number: ".concat(a));else if(i)b("Error in [handleNumberChange] at zeroCheck: value is bellow zero: ".concat(a));else if(l)b("Error in [handleNumberChange] at stepCheck: value is an incompatible ammount: ".concat(a));else{b(null);var s=Object(We.a)({},t,void 0===e||null===e||""===e?null:a);c({type:F.UPDATE_NOTES,payload:s})}}(e.target.value)},value:null===g?void 0:g,bgColor:"#f8f8f8",borderColor:"rgba(0,0,0,0)",borderRadius:"none",borderBottom:"2px solid",borderBottomColor:"theme_light.text.lighter",boxShadow:u?"0 0 0 2px #E75858":"",title:"Number of individual ".concat(o," notes"),className:"tab_jump"})})},it=function(e){var t=e.denomination,n=e.step,o=e.label,r=Object(a.useState)(null),i=Object(he.a)(r,2),c=i[0],l=i[1],s=Object(a.useContext)(Ve),d=s.state,u=s.dispatch,b=d.data.notes[t],p=Object(a.useState)(null),j=Object(he.a)(p,2),g=j[0],h=j[1];Object(a.useEffect)((function(){h("number"===typeof b?b/100:"")}),[b,n]);return Object(de.jsx)(He.a,{px:"2em",title:"Number of individual ".concat(o," notes ").concat(c?"\n"+c:""),value:Je(g),children:Object(de.jsx)(He.b,{onChange:function(e){return function(e){var o=Number(e),a=100*o;h(""===e||void 0===e||null===e?"":e);var r=n/100,i=o/r,c=i<0,s=i>0&&o%r;if(isNaN(i))l('Error in [handleValueChange] at "Nan Check": value is not a number: '.concat(i));else if(c)l('Error in [handleValueChange] at "Zero Check": value is bellow zero: '.concat(i));else if(s)l('Error in [handleValueChange] at "Step Check": value is an incompatible ammount: '.concat(i));else{l(null);var d=Object(We.a)({},t,""===e||null===e||void 0===e?null:a);u({type:F.UPDATE_NOTES,payload:d})}}(e.target.value)},value:Je(g),bgColor:"#f8f8f8",borderColor:"rgba(0,0,0,0)",borderRadius:"none",borderBottom:"2px solid",borderBottomColor:"theme_light.text.lighter",boxShadow:c?"0 0 0 2px #E75858":"",className:"tab_jump"})})},ct=function(e){var t=e.label,n=e.step,o=e.denomination;return Object(de.jsx)(oe.b,{p:"8px 20px",children:Object(de.jsxs)(oe.a,{alignItems:"center",justifyContent:"space-around",width:"100%",templateColumns:"100px 1fr 1fr",justifyItems:"center",children:[Object(de.jsx)(Ge.a,{margin:"0",children:t}),Object(de.jsx)(rt,{step:n,denomination:o,label:t}),Object(de.jsx)(it,{step:n,denomination:o,label:t})]})})},lt=function(){var e=Object(a.useContext)(Ve).state.data.notes.total;return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(le.a,{}),Object(de.jsx)(Ge.a,{marginTop:"10px",title:"Notes in the till or Uncounted Pickups is this was a spot check. (Uncounted Pickups are notes which were in the safe during a pickup but not yet processed. Hence VBS would have assumed they were still in the till.",children:"Notes / Uncounted Pickups"}),Object(de.jsxs)(oe.b,{colStart:1,colEnd:-1,children:[Object(de.jsxs)(ae.a,{direction:"column",children:[Object(de.jsxs)(oe.a,{p:"8px 20px",alignItems:"center",justifyContent:"space-around",width:"100%",templateColumns:"100px 1fr 1fr",justifyItems:"center",children:[Object(de.jsx)(ce.a,{}),Object(de.jsx)(Ge.a,{children:"Number"}),Object(de.jsx)(Ge.a,{children:"Value"})]}),Object(de.jsx)(ct,{label:"\xa350",step:5e3,denomination:"note_fifty"}),Object(de.jsx)(ct,{label:"\xa320",step:2e3,denomination:"note_twenty"}),Object(de.jsx)(ct,{label:"\xa310",step:1e3,denomination:"note_ten"}),Object(de.jsx)(ct,{label:"\xa35",step:500,denomination:"note_five"}),Object(de.jsx)(ct,{label:"\xa31 (Scottish)",step:100,denomination:"note_one"})]}),Object(de.jsx)(Ze,{value:e,title:"total value of notes (\xa3)"})]})]})},st=function(){var e=Object(a.useContext)(Ve),t=e.state,n=e.dispatch,o=Object(l.c)((function(e){return e.repositories.repositoryList}));return Object(de.jsx)(ce.a,{p:"10px 0 20px",children:Object(de.jsx)(Ne,{w:"50%",value:t.repositoryId||void 0,onChange:function(e){return n({type:F.UPDATE_REPO,payload:e.target.value})},children:o.map((function(e){return Object(de.jsx)("option",{value:e.id,children:e.name},e.id)}))})})},dt=n(71),ut=n.n(dt),bt=n(186),pt=n.n(bt),jt=n(351),gt=function(e){return Object(de.jsxs)(ce.a,{border:"2px solid",display:"inline-flex",color:"theme_light.text.light",borderColor:"theme_light.text.lighter",p:"2px 16px",fontSize:"18px",position:"relative",alignItems:"center",title:e.title||"pick a date",transition:".1s linear",_hover:{color:"theme_light.text.standard",borderColor:"theme_light.text.light"},children:[Object(de.jsx)(ut.a,Object(g.a)({},e)),Object(de.jsx)(jt.a,{})]})},ht=n(352),ft=function(e){return Object(de.jsxs)(ce.a,{border:"2px solid",display:"inline-flex",color:"theme_light.text.light",borderColor:"theme_light.text.lighter",p:"2px 16px",fontSize:"18px",position:"relative",alignItems:"center",title:e.title||"select a time",transition:".1s linear",_hover:{color:"theme_light.text.standard",borderColor:"theme_light.text.light"},children:[Object(de.jsx)(ut.a,Object(g.a)({},e)),Object(de.jsx)(ht.a,{})]})};Object(dt.registerLocale)("gb",pt.a),Object(dt.setDefaultLocale)("gb");var mt=function(){var e=Object(a.useContext)(Ve),t=e.state.timestamp,n=e.dispatch,o=function(e){n({type:F.UPDATE_TIME,payload:e})};return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(Ge.a,{children:"Date"}),Object(de.jsxs)(ae.a,{w:"100%",justifyContent:"space-around",flexWrap:"wrap",children:[Object(de.jsxs)(ae.a,{flexWrap:"wrap",justifyContent:"center",children:[Object(de.jsx)(gt,{flex:"1",selected:t,onChange:o,name:"Date Start",locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"dd/MM/yyyy"}),Object(de.jsx)(ft,{flex:"1",selected:t,onChange:o,name:"Date Start",showTimeSelect:!0,showTimeSelectOnly:!0,locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"HH:mm"})]}),Object(de.jsx)(re.a,{variant:"ui",onClick:function(){return n({type:F.UPDATE_TIME,payload:Date.now()})},children:"Count Now"})]})]})},xt=n(361),Ot=n(357),vt=n(358),_t=n(353),yt=n(54),Ct=n(77),Et=n(356),wt=function(){var e=Object(a.useState)(!1),t=Object(he.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(void 0),i=Object(he.a)(r,2),c=i[0],s=i[1],d=Object(a.useState)(!1),u=Object(he.a)(d,2),b=u[0],p=u[1],j=Object(a.useState)(null),g=Object(he.a)(j,2),f=g[0],m=g[1],x=Object(a.useState)(null),O=Object(he.a)(x,2),v=O[0],_=O[1],y=Object(l.c)((function(e){return e.auth.partnerList})),C=Object(l.b)(),E=Object($.i)(),w=Object(a.useRef)(),P=Object($.g)(),T=function(){return o(!1)};return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(_t.a,{isOpen:n,leastDestructiveRef:w,size:"lg",onClose:function(){},closeOnEsc:!0,closeOnOverlayClick:!0,blockScrollOnMount:!0,children:Object(de.jsx)(yt.g,{children:Object(de.jsxs)(_t.b,{w:"800px",children:[Object(de.jsxs)(yt.f,{children:["Are you sure you want to delete this count?",Object(de.jsx)(yt.c,{onClick:T})]}),Object(de.jsxs)(yt.b,{children:["This cannot be undone except by a duty manager.",Object(de.jsx)(fe.a,{marginTop:"20px",color:"theme_light.ui.dangerDark",children:f||""})]}),Object(de.jsx)(yt.e,{flexDirection:"row-reverse",children:Object(de.jsxs)(Ct.a,{children:[Object(de.jsx)(Ge.a,{marginBottom:"30px",children:"Select your name to confirm the delete:"}),Object(de.jsxs)(Ne,{value:c,onChange:function(e){s(e.target.value),_(null)},borderColor:v?"theme_light.ui.dangerLight":"theme_light.text.lighter",title:v||null,_hover:{borderColor:v?"theme_light.ui.dangerDark":"theme_light.text.light"},children:[Object(de.jsx)("option",{value:"undefined",children:"-Select Your Partner ID-"}),y.map((function(e){return Object(de.jsx)("option",{value:e.id,children:"".concat(e.firstName).concat(e.preferredName?" (".concat(e.preferredName,")"):""," ").concat(e.lastName," - ").concat(e.tillNumber)},e.id)}))]}),Object(de.jsxs)(ae.a,{justifyContent:"space-between",marginTop:"30px",children:[Object(de.jsx)(re.a,{variant:"dangerOutline",border:"none",h:"2rem",onClick:function(e){if(c&&""!==c&&void 0!==c&&"undefined"!==c){p(!0);var t="/api/v1/count/".concat(E.id);fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t,n;200===e.status?(C(function(){var e=Object(ee.a)(Q.a.mark((function e(o){var a,r,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/v1/count?deleted=false&page=".concat(t||0,"&pagelength=").concat(n||10),console.log(a),e.next=4,fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return r=e.sent,e.next=7,r.json();case 7:i=e.sent,console.log(i),o({type:h.COUNTS_DATA_WRITE_ALL,payload:i.counts});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C(ne("Count Deleted","","info",5e3)),P.push("/counts")):(m(e.responseMessage||e.errorMessage),console.error(e.responseMessage||e.errorMessage),p(!1))})).catch((function(e){m(e.error),console.error(e),p(!1)}))}else _("Please select yourself from this list.")},disabled:b,children:"Delete this count"}),Object(de.jsx)(re.a,{ref:w,onClick:T,px:"40px",disabled:b,children:"Back to Safety"})]})]})})]})})}),Object(de.jsx)(xt.c,{icon:Object(de.jsx)(Et.a,{}),onClick:function(e){e.preventDefault(),o(!n)},children:"Delete Count"})]})},Pt=n(130);function Tt(e,t,n){var o={repositoryId:e.repositoryId,timestamp:e.timestamp,float:{bagPence1:e.data.bagged.pence_one,bagPence2:e.data.bagged.pence_two,bagPence5:e.data.bagged.pence_five,bagPence10:e.data.bagged.pence_ten,bagPence20:e.data.bagged.pence_twenty,bagPence50:e.data.bagged.pence_fifty,bagPound1:e.data.bagged.pound_one,bagPound2:e.data.bagged.pound_two,bagNote5:e.data.bagged.note_five,bagTotal:e.data.bagged.total,loosePence1:e.data.loose.pence_one,loosePence2:e.data.loose.pence_two,loosePence5:e.data.loose.pence_five,loosePence10:e.data.loose.pence_ten,loosePence20:e.data.loose.pence_twenty,loosePence50:e.data.loose.pence_fifty,loosePound1:e.data.loose.pound_one,loosePound2:e.data.loose.pound_two,looseOther:e.data.loose.other,looseTotal:e.data.loose.total,note1:e.data.notes.note_one,note5:e.data.notes.note_five,note10:e.data.notes.note_ten,note20:e.data.notes.note_twenty,note50:e.data.notes.note_fifty,noteTotal:e.data.notes.total,floatTotal:e.data.notes.total}};e.counterId?(o.counter="",o.counterId=Number(e.counterId)):(o.counterId=null,o.counter=e.counter),e.supervisorId?(o.supervisor="",o.supervisorId=Number(e.supervisorId)):(o.supervisorId=null,o.supervisor=e.supervisor),console.log(o);var a="/api/v1/count/".concat(e.id),r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:o})};fetch(a,r).then((function(e){return e.json()})).then((function(e){console.log(e);var n=e.validation.code;return 200===e.status?t(ne("Count updated","",n,8e3)):t(ne("There was an issue updating the count",e.errorMessage||e.responseMessage||"",n,8e3)),e})).then(n).catch((function(e){t(ne("Something went wrong.",e,"danger",8e3)),console.error(e)}))}function St(e,t,n){var o={repositoryId:e.repositoryId,timestamp:e.timestamp,float:{bagPence1:e.data.bagged.pence_one,bagPence2:e.data.bagged.pence_two,bagPence5:e.data.bagged.pence_five,bagPence10:e.data.bagged.pence_ten,bagPence20:e.data.bagged.pence_twenty,bagPence50:e.data.bagged.pence_fifty,bagPound1:e.data.bagged.pound_one,bagPound2:e.data.bagged.pound_two,bagNote5:e.data.bagged.note_five,bagTotal:e.data.bagged.total,loosePence1:e.data.loose.pence_one,loosePence2:e.data.loose.pence_two,loosePence5:e.data.loose.pence_five,loosePence10:e.data.loose.pence_ten,loosePence20:e.data.loose.pence_twenty,loosePence50:e.data.loose.pence_fifty,loosePound1:e.data.loose.pound_one,loosePound2:e.data.loose.pound_two,looseOther:e.data.loose.other,looseTotal:e.data.loose.total,note1:e.data.notes.note_one,note5:e.data.notes.note_five,note10:e.data.notes.note_ten,note20:e.data.notes.note_twenty,note50:e.data.notes.note_fifty,noteTotal:e.data.notes.total,floatTotal:e.data.notes.total}};e.counterId?(o.counter="",o.counterId=Number(e.counterId)):(o.counterId=null,o.counter=e.counter),e.supervisorId?(o.supervisor="",o.supervisorId=Number(e.supervisorId)):(o.supervisorId=null,o.supervisor=e.supervisor);var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:o})};fetch("/api/v1/count/",a).then((function(e){return e.json()})).then((function(e){var n=e.validation.code;return 200===e.status?t(ne("New count created successfully","Count status: ".concat(n),"complete",8e3)):t(ne("There was an issue posting the new count",e.errorMessage||e.responseMessage||"",n,8e3)),e})).then(n).catch((function(e){console.error({error:e}),t(ne("Something went wrong.",e.error,"danger",8e3))}))}var Dt=function(){var e=Object(a.useContext)(Ve).state,t=Object(l.b)();return Object(de.jsx)(de.Fragment,{children:Object(de.jsx)(xt.c,{onClick:function(){Tt(e,t)},icon:Object(de.jsx)(Pt.a,{as:et.a}),children:"Save"})})},At=function(){return Object(de.jsx)(ae.a,{justifyContent:"flex-end",fontSize:16,children:Object(de.jsxs)(xt.a,{children:[Object(de.jsx)(xt.b,{as:Ot.a,"arial-label":"Options",icon:Object(de.jsx)(vt.a,{fontSize:"26px"}),variant:"ui"}),Object(de.jsxs)(xt.d,{boxShadow:"0 5px 10px rgba(0,0,0,.3)",children:[Object(de.jsx)(wt,{}),Object(de.jsx)(Dt,{})]})]})})},Ft=function(e){var t=e.total;return Object(de.jsx)(fe.a,{fontSize:"32px",children:(t/100).toFixed(2)})},Lt=function(e){var t=e.bagged,n=e.loose,o=e.notes;return Object(de.jsx)(fe.a,{gridColumn:"2",color:"theme_light.text.lighter",marginTop:"10px",children:[t,n,o].filter((function(e){return void 0!==e})).map((function(e){return e/100})).map((function(e){return e.toFixed(2)})).join(" + ")})},It=function(){var e=Object(a.useContext)(Ve).state,t=e.data.bagged.total,n=e.data.loose.total,o=e.data.notes.total;return Object(de.jsxs)(ce.a,{children:[Object(de.jsx)(le.a,{}),Object(de.jsxs)(oe.a,{templateColumns:"1fr 1fr",templateRows:"auto auto",justifyItems:"center",p:"40px 10px 10px",children:[Object(de.jsx)(oe.b,{display:"flex",alignItems:"center",children:Object(de.jsx)(ie.a,{as:"h3",children:"Till Total"})}),Object(de.jsx)(oe.b,{display:"flex",alignItems:"center",children:Object(de.jsx)(Ft,{total:t+n+o})}),Object(de.jsx)(Lt,{bagged:t,loose:n,notes:o})]})]})};var Nt=function(e,t){switch(t.type){case F.WRITE_ALL:return console.log(t.payload),Object(g.a)(Object(g.a)({},t.payload),{},{ready:!0});case F.SET_READY:return Object(g.a)(Object(g.a)({},e),{},{ready:!0});case F.UPDATE_REPO:return Object(g.a)(Object(g.a)({},e),{},{repositoryId:t.payload});case F.UPDATE_COUTNER:return Object(g.a)(Object(g.a)({},e),{},{counter:t.payload.counter,counterId:t.payload.counterId||e.counterId});case F.UPDATE_SUPERVISOR:return Object(g.a)(Object(g.a)({},e),{},{supervisor:t.payload.supervisor,supervisorId:t.payload.supervisorId});case F.UPDATE_TIME:return Object(g.a)(Object(g.a)({},e),{},{timestamp:t.payload});case F.UPDATE_BAG:return function(e,t){var n=Object(g.a)(Object(g.a)({},e.data.bagged),t.payload),o=Object.keys(n).filter((function(e){return"total"!==e})).reduce((function(e,t){return e+n[t]}),0);return Object(g.a)(Object(g.a)({},e),{},{data:Object(g.a)(Object(g.a)({},e.data),{},{bagged:Object(g.a)(Object(g.a)({},n),{},{total:o})})})}(e,t);case F.UPDATE_LOOSE:return function(e,t){var n=Object(g.a)(Object(g.a)({},e.data.loose),t.payload),o=Object.keys(n).filter((function(e){return"total"!==e})).reduce((function(e,t){return e+n[t]}),0);return Object(g.a)(Object(g.a)({},e),{},{data:Object(g.a)(Object(g.a)({},e.data),{},{loose:Object(g.a)(Object(g.a)({},n),{},{total:o})})})}(e,t);case F.UPDATE_NOTES:return function(e,t){var n=Object(g.a)(Object(g.a)({},e.data.notes),t.payload),o=Object.keys(n).filter((function(e){return"total"!==e})).reduce((function(e,t){return e+n[t]}),0);return Object(g.a)(Object(g.a)({},e),{},{data:Object(g.a)(Object(g.a)({},e.data),{},{notes:Object(g.a)(Object(g.a)({},n),{},{total:o})})})}(e,t);default:return e}},Rt={id:null,repository:Ye[0],repositoryId:null,counter:"",counterId:"",supervisor:"",supervisorId:"",data:{bagged:{pence_one:null,pence_two:null,pence_five:null,pence_ten:null,pence_twenty:null,pence_fifty:null,pound_one:null,pound_two:null,note_five:null,total:null},loose:{pence_one:null,pence_two:null,pence_five:null,pence_ten:null,pence_twenty:null,pence_fifty:null,pound_one:null,pound_two:null,other:null,total:null},notes:{note_one:null,note_five:null,note_ten:null,note_twenty:null,note_fifty:null,total:null},total:0},timestamp:Date.now(),ready:!1,verified:!1},Bt=function(e){var t=e.edit,n=Object($.g)(),o=Object(a.useContext)(Ve).state,r=Object(l.b)();return Object(de.jsx)(re.a,{variant:"link",size:"lg",py:"16px",onClick:function(){t?(console.log("Send ajax to PUT, show flash"),Tt(o,r)):(console.log("Send ajax POST, show flash"),St(o,r,(function(e){var t="/count/".concat(e.count.id);return console.log("redirecting to: ",t),n.push(t)})))},children:"Save"})},kt=function(e){var t=e.edit,n=Object(a.useContext)(Ve).state,o=Object(l.b)(),r=Object($.g)();return Object(de.jsx)(re.a,{variant:"outline",bgColor:"#fff",size:"lg",mx:"3em",onClick:function(){t?(console.log("Send ajax to PUT, show flash"),Tt(n,o,(function(){r.goBack()}))):(console.log("Perform Validation, Show confirmation, send ajax to POST, show flash"),St(n,o,(function(e){return r.goBack()})))},children:"Save and Close"})},Ut=function(e){var t=e.edit,n=Object(a.useContext)(Ve).state,o=Object(l.b)(),r=Object($.g)();return Object(de.jsxs)(re.a,{size:"lg",py:"12px",onClick:function(){t?(console.log("Send ajax to PUT, redirect to /count/new"),Tt(n,o,(function(){r.push("/count/new")}))):(console.log("Perform Validation, Show confirmation, send ajax to POST, redirect to /count/new"),St(n,o,(function(e){r.push("/count/new")})))},children:["Save & Next ",Object(de.jsx)(ke.a,{})]})},Mt=function(e){var t=e.edit;return Object(de.jsxs)(ae.a,{border:"1px dashed",borderColor:"rgba(155,0,0,0)",alignItems:"center",justifyContent:"center",py:"1em",my:"3em",position:"sticky",bottom:"0px",flexWrap:"wrap",children:[Object(de.jsx)(Bt,{edit:t}),Object(de.jsx)(kt,{edit:t}),Object(de.jsx)(Ut,{edit:t})]})},Gt=function(e){var t=e.edit,n=Object($.i)(),o=Object(l.c)((function(e){return e.repositories.repositoryList})),r=Object(a.useReducer)(Nt,Rt),i=Object(he.a)(r,2),c=i[0],s=i[1],d=Object(a.useState)(null),u=Object(he.a)(d,2),b=u[0],p=u[1];return Object(a.useEffect)((function(){var e=function(){return s({type:F.SET_READY,payload:{}})};if(!t){if(o.length)return s({type:F.WRITE_ALL,payload:Object(g.a)(Object(g.a)({},Rt),{},{repositoryId:o[0].id})}),e();return fetch("/api/v1/repository?limit=1",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s({type:F.WRITE_ALL,payload:Object(g.a)(Object(g.a)({},Rt),{},{repositoryId:e.repositories[0].id})})})),e()}var a="/api/v1/count/".concat(n.id);fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e.status>100&&e.status<300){var t=e.count[0],n={id:t.id,repository:"".concat(t.repositoryId),repositoryId:t.repositoryId,timestamp:t.timestamp,counter:Xe(t.counter),counterId:t.counterId,supervisor:Xe(t.supervisor),supervisorId:t.supervisorId,ready:!1,verified:Boolean(t.verified),data:{bagged:{pence_one:t.float.bagPence1,pence_two:t.float.bagPence2,pence_five:t.float.bagPence5,pence_ten:t.float.bagPence10,pence_twenty:t.float.bagPence20,pence_fifty:t.float.bagPence50,pound_one:t.float.bagPound1,pound_two:t.float.bagPound2,note_five:t.float.bagNote5,total:t.float.bagTotal},loose:{pence_one:t.float.loosePence1,pence_two:t.float.loosePence2,pence_five:t.float.loosePence5,pence_ten:t.float.loosePence10,pence_twenty:t.float.loosePence20,pence_fifty:t.float.loosePence50,pound_one:t.float.loosePound1,pound_two:t.float.loosePound2,other:t.float.looseOther,total:t.float.looseTotal},notes:{note_one:t.float.note1,note_five:t.float.note5,note_ten:t.float.note10,note_twenty:t.float.note20,note_fifty:t.float.note50,total:t.float.noteTotal},total:t.float.floatTotal}};p(t.createdOn),s({type:F.WRITE_ALL,payload:n})}else console.error(e.errorMessage)})).catch((function(e){return console.error(e)}))}),[t,n.id,s]),t&&!c.ready?Object(de.jsxs)(ae.a,{direction:"column",children:[Object(de.jsx)(Se.a,{height:"30px",my:"4px"}),Object(de.jsx)(Se.a,{height:"30px",my:"4px"}),Object(de.jsx)(Se.a,{height:"30px",my:"4px"})]}):Object(de.jsxs)(Ve.Provider,{value:{state:c,dispatch:s},children:["number"===typeof b?Object(de.jsxs)(fe.a,{children:["Count originally created ",new Date(b||"").toLocaleString("en-GB")]}):"",Object(de.jsx)(fe.a,{wordBreak:"break-all"}),Object(de.jsxs)(ae.a,{flexDirection:"column",children:[t?Object(de.jsx)(At,{}):"",Object(de.jsx)(st,{}),Object(de.jsxs)(ae.a,{flexDirection:"column",bgColor:"#fff",p:"3em 1em",m:"0 0 3em",children:[Object(de.jsx)(mt,{}),Object(de.jsxs)(ae.a,{justifyContent:"space-around",m:"30px 0",children:[Object(de.jsx)(nt,{label:"Counter",dispatchType:F.UPDATE_COUTNER,stateAssignment:"counter"}),Object(de.jsx)(nt,{label:"Supervisor",dispatchType:F.UPDATE_SUPERVISOR,stateAssignment:"supervisor"})]}),Object(de.jsx)($e,{}),Object(de.jsx)(at,{}),Object(de.jsx)(lt,{}),Object(de.jsx)(It,{}),Object(de.jsx)(Mt,{edit:t})]})]})]})},Wt=(n(308),n(309),n(310),n(311),n(312),n(365)),zt=function(){var e=Object(l.c)((function(e){return e.repositories.repositoryList})),t=Object(a.useState)(1),n=Object(he.a)(t,2),o=n[0],r=n[1],i=new Date("2021-03-30"),c=Object(a.useState)(new Date(i.getTime()-3024e6)),s=Object(he.a)(c,2),d=s[0],u=s[1],b=Object(a.useState)(i),p=Object(he.a)(b,2),j=p[0],h=p[1],f=Object(a.useState)(!0),m=Object(he.a)(f,2),x=m[0],O=m[1],v=Object(a.useState)([]),_=Object(he.a)(v,2),y=_[0],C=_[1],E=Object(a.useState)(.2),w=Object(he.a)(E,2),P=w[0],T=w[1],S=Object(a.useState)(null),D=Object(he.a)(S,2),A=D[0],F=D[1],L=Object(l.c)((function(e){return e.ui.colours})),I=Object(a.useState)({bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]}),N=Object(he.a)(I,2),R=N[0],B=N[1];Object(a.useEffect)((function(){var e="/api/v1/count?fromdate=".concat(d.getTime(),"&todate=").concat(j.getTime(),"&float=true&repository=").concat(o);console.log(e);fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),C(e.counts.reverse())}))}),[o,j,d]),Object(a.useEffect)((function(){var e=y.map((function(e){var t={bagNote5:500,bagPound2:2e3,bagPound1:2e3,bagPence50:1e3,bagPence20:1e3,bagPence10:500,bagPence5:500,bagPence2:100,bagPence1:100},n=Object(g.a)({},e.float),o=["bagNote5","bagPound2","bagPound1","bagPence50","bagPence20","bagPence10","bagPence5","bagPence2","bagPence1"].map((function(t){return{label:t,value:e.float[t]}})).sort((function(e,t){return e.value-t.value})),a=[];return o.forEach((function(e){0===a.length||e.value===a[0].value?a.push(e):function(e){for(var o=a.length,r=Math.ceil(o/2),i=1-r,c=0;i<=o-r;i++,c++){var l=a[c].label,s=a[c].value,d=x?i*P*t[l]:i;n[l]=s+d}a.length=0,a.push(e)}(e)})),Object(g.a)(Object(g.a)({},e),{},{float:n})})).reduce((function(e,t,n){var o,a,r,i,c,l,s,d,u,b=Object(g.a)({},e);return b.bagNote5.push({label:"Bagged \xa35",y:((null===(o=t.float)||void 0===o?void 0:o.bagNote5)||0)/500,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b.bagPound2.push({label:"Bagged \xa32",y:((null===(a=t.float)||void 0===a?void 0:a.bagPound2)||0)/2e3,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b.bagPound1.push({label:"Bagged \xa31",y:((null===(r=t.float)||void 0===r?void 0:r.bagPound1)||0)/2e3,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b.bagPence50.push({label:"Bagged 50p",y:((null===(i=t.float)||void 0===i?void 0:i.bagPence50)||0)/1e3,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b.bagPence20.push({label:"Bagged 20p",y:((null===(c=t.float)||void 0===c?void 0:c.bagPence20)||0)/1e3,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b.bagPence10.push({label:"Bagged 10p",y:((null===(l=t.float)||void 0===l?void 0:l.bagPence10)||0)/500,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b.bagPence5.push({label:"Bagged 5p",y:((null===(s=t.float)||void 0===s?void 0:s.bagPence5)||0)/500,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b.bagPence2.push({label:"Bagged 2p",y:((null===(d=t.float)||void 0===d?void 0:d.bagPence2)||0)/100,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b.bagPence1.push({label:"Bagged 1p",y:((null===(u=t.float)||void 0===u?void 0:u.bagPence1)||0)/100,x:n,timestamp:t.timestamp?new Date(t.timestamp).toLocaleString("en-GB"):void 0,id:t.id}),b}),{bagNote5:[],bagPound2:[],bagPound1:[],bagPence50:[],bagPence20:[],bagPence10:[],bagPence5:[],bagPence2:[],bagPence1:[]});B(e)}),[y,x,P]);var k=function(e){F(e)};return Object(de.jsxs)("div",{style:{background:"#fff"},children:[Object(de.jsxs)(ae.a,{alignItems:"center",children:[Object(de.jsx)(Ne,{onChange:function(e){r(e.target.value)},value:o,w:"250px",children:e.map((function(e){return Object(de.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(de.jsx)(gt,{flex:"1",selected:d,onChange:function(e){return u(e)},name:"Date Start",locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"dd/MM/yyyy"}),Object(de.jsx)(gt,{flex:"1",selected:j,onChange:function(e){return h(e)},name:"Date Start",locale:"gb",timeFormat:"HH:mm",timeCaption:"time input",dateFormat:"dd/MM/yyyy"}),Object(de.jsxs)(re.a,{onClick:function(){O(!x)},variant:"ui",children:["Adjustments: ",x?"ON":"OFF"]}),Object(de.jsxs)(Wt.a,{min:.05,max:.8,step:.01,value:P,onChange:function(e){return T(e)},width:"200px",children:[Object(de.jsx)(Wt.d,{children:Object(de.jsx)(Wt.b,{})}),Object(de.jsx)(Wt.c,{})]})]}),Object(de.jsxs)(Ce.g,{width:1200,height:500,yPadding:20,onMouseLeave:function(){return F(null)},style:{position:"relative"},children:[Object(de.jsx)(Ce.c,{}),Object(de.jsx)(Ce.f,{}),Object(de.jsx)(Ce.h,{}),Object(de.jsx)(Ce.d,{fill:"none",data:R.bagPound2,color:L.green}),Object(de.jsx)(Ce.d,{fill:"none",data:R.bagPound1,color:L.blue}),Object(de.jsx)(Ce.d,{fill:"none",data:R.bagPence50,color:L.orange}),Object(de.jsx)(Ce.d,{fill:"none",data:R.bagPence20,color:L.yellow}),Object(de.jsx)(Ce.d,{fill:"none",data:R.bagPence10,color:L.teal}),Object(de.jsx)(Ce.d,{fill:"none",data:R.bagPence5,color:L.black}),Object(de.jsx)(Ce.d,{fill:"none",data:R.bagPence2,color:L.gold}),Object(de.jsx)(Ce.d,{fill:"none",data:R.bagPence1,color:L.liveRed,onSeriesMouseOver:function(){return console.log(Date.now())}}),Object(de.jsx)(Ce.e,{className:"bagged-pound-two",data:R.bagPound2,onValueMouseOver:k,color:L.green}),Object(de.jsx)(Ce.e,{className:"bagged-pound-one",data:R.bagPound1,onValueMouseOver:k,color:L.blue}),Object(de.jsx)(Ce.e,{className:"bagged-pence-fifty",data:R.bagPence50,onValueMouseOver:k,color:L.orange}),Object(de.jsx)(Ce.e,{className:"bagged-pence-twenty",data:R.bagPence20,onValueMouseOver:k,color:L.yellow}),Object(de.jsx)(Ce.e,{className:"bagged-pence-ten",data:R.bagPence10,onValueMouseOver:k,color:L.teal}),Object(de.jsx)(Ce.e,{className:"bagged-pence-five",data:R.bagPence5,onValueMouseOver:k,color:L.black}),Object(de.jsx)(Ce.e,{className:"bagged-pence-two",data:R.bagPence2,onValueMouseOver:k,color:L.gold}),Object(de.jsx)(Ce.e,{className:"bagged-pence-one",data:R.bagPence1,onValueMouseOver:k,color:L.liveRed}),null!==A&&Object(de.jsx)(Ce.b,{value:A})]}),JSON.stringify(A),Object(de.jsxs)("ul",{children:[Object(de.jsx)("li",{children:"Toggle individual series"}),Object(de.jsx)("li",{children:"How to emphasis on hover"}),Object(de.jsx)("li",{children:"Why Emotion.js not working?"}),Object(de.jsx)("li",{children:"Cancel Hint on mouseout"}),Object(de.jsx)("li",{children:"Add Crosshair"}),Object(de.jsx)("li",{children:"Add series labels"})]})]})},Ht=function(){var e=Object(l.b)();return Object(a.useEffect)((function(){e(function(){var e=Object(ee.a)(Q.a.mark((function e(t){var n,o,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.next=4,fetch("/api/v1/partner?deleted=false",n);case 4:return o=e.sent,e.next=7,o.json();case 7:a=e.sent,t({type:h.AUTH_PARTNER_WRITE_ALL,payload:a.partners});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(ee.a)(Q.a.mark((function e(t){var n,o,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.next=4,fetch("/api/v1/repository?deleted=false",n);case 4:return o=e.sent,e.next=7,o.json();case 7:a=e.sent,t({type:h.REPOSITORIES_WRITE_ALL,payload:a.repositories});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(ee.a)(Q.a.mark((function e(t){var n,o,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.next=4,fetch("/api/v1/user?deleted=false",n);case 4:return o=e.sent,e.next=7,o.json();case 7:a=e.sent,console.log(a),t({type:h.AUTH_USERS_WRITE_ALL,payload:a.users});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(de.jsx)("div",{className:"App",children:Object(de.jsx)(Z.a,{children:Object(de.jsxs)($.d,{children:[Object(de.jsx)($.b,{path:"/login",children:Object(de.jsx)(_e,{})}),Object(de.jsx)($.b,{path:"/home",children:Object(de.jsx)(ve,{})}),Object(de.jsx)($.b,{path:"/counts",children:Object(de.jsx)(ve,{title:"All Counts",children:Object(de.jsx)(Me,{})})}),Object(de.jsx)($.b,{path:"/count/new",children:Object(de.jsx)(ve,{title:"Add Count",children:Object(de.jsx)(Gt,{})})}),Object(de.jsx)($.b,{path:"/count/:id",children:Object(de.jsx)(ve,{title:"Edit Count",children:Object(de.jsx)(Gt,{edit:!0})})}),Object(de.jsx)($.b,{path:"/repositories",children:Object(de.jsx)(ve,{title:"All Repositories",children:Object(de.jsx)(Te,{})})}),Object(de.jsx)($.b,{path:"/vistest1",children:Object(de.jsx)(ve,{title:"Visualisation Test 1",children:Object(de.jsx)(zt,{})})}),Object(de.jsx)($.b,{path:"/",children:Object(de.jsx)($.a,{to:"/repositories"})})]})})})},Vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,368)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),r(e),i(e)}))},Yt=Object(s.a)(K);c.a.render(Object(de.jsx)(r.a.StrictMode,{children:Object(de.jsx)(l.a,{store:I,children:Object(de.jsx)(d.a,{theme:Yt,children:Object(de.jsx)(Ht,{})})})}),document.getElementById("root")),Vt()}},[[313,1,2]]]);
//# sourceMappingURL=main.fc5e6367.chunk.js.map